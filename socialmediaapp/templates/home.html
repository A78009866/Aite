{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/jpg" href="https://upload.wikimedia.org/wikipedia/commons/b/ba/Aiter.jpg">
    <title>Aite Salem</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
    <style>
        /* âœ… ØªØ­Ø³ÙŠÙ† Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ø¹Ø§Ù… */
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f2f5;
            margin: 0;
            padding: 0;
        }
    
        /* âœ… Ø¬Ø¹Ù„ Ø§Ù„Ù†Ø§ÙØ¨Ø§Ø± Ø«Ø§Ø¨Øª Ø¯ÙˆÙ† Ø­Ø¬Ø¨ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background-color: #ffffff;
            padding: 10px 15px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            z-index: 1000;
        }
    
        /* âœ… ØªØ­Ø³ÙŠÙ† Ø´Ø±ÙŠØ· Ø§Ù„Ø¨Ø­Ø« */
        .search-bar {
            max-width: 500px;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 20px;
            outline: none;
            transition: border 0.3s;
            margin-left: 20px;
        }
    
        .search-bar:focus {
            border-color: #1877f2;
        }
    
        /* âœ… Ø¶Ø¨Ø· Ø§Ù„Ù…Ø³Ø§ÙØ© Ø¨ÙŠÙ† Ø§Ù„Ù†Ø§ÙØ¨Ø§Ø± ÙˆØ§Ù„Ù…Ø­ØªÙˆÙ‰ */
        .content-container {
            margin-top: 80px;  /* Ù‡Ø§Ù…Ø´ Ø£Ø¹Ù„Ù‰ Ù„ØªØ¹ÙˆÙŠØ¶ Ø§Ù„Ù†Ø§ÙØ¨Ø§Ø± */
            padding-top: 20px;  /* Ù‡Ø§Ù…Ø´ Ø¯Ø§Ø®Ù„ÙŠ Ø£Ø¹Ù„Ù‰ */
        }
    
        /* âœ… ØªØ­Ø³ÙŠÙ† ØªØµÙ…ÙŠÙ… Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª */
        .post {
            background-color: #ffffff;
            border-radius: 10px;
            padding: 15px;
            width: 90%;
            max-width: 600px;
            box-shadow: 0px 2px 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            margin: 10px auto;  /* ØªÙˆØ³ÙŠØ· Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª */
        }
    
        .post-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }
    
        .post img {
            width: 100%;
            height: auto;
            border-radius: 10px;
        }
    
        /* âœ… ØªØ­Ø³ÙŠÙ† Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¥Ø¹Ø¬Ø§Ø¨ ÙˆØ§Ù„ØªÙØ§Ø¹Ù„ */
        .post-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 10px;
            border-top: 1px solid #ddd;
        }
    
        .post-actions .btn {
            display: flex;
            align-items: center;
            gap: 5px;
            cursor: pointer;
            padding: 8px 12px;
            border-radius: 8px;
            transition: background 0.3s;
        }
    
        .post-actions .btn:hover {
            background: #f0f2f5;
        }
    
        .like-section {
            display: flex;
            align-items: center;
            gap: 5px;
        }
    
        .like {
            display: flex;
            align-items: center;
            cursor: pointer;
            padding: 8px 12px;
            border-radius: 8px;
            transition: background 0.3s;
        }
    
        .like:hover {
            background: #f0f2f5;
        }
    
        .comments-section {
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid #ddd;
        }
    
        .comment {
            background-color: #e9ecef;
            padding: 8px;
            border-radius: 8px;
            margin-top: 5px;
        }
    
        /* âœ… ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„Ù‡ÙˆØ§ØªÙ */
        @media (max-width: 700px) {
            .navbar {
                flex-direction: row; /* Ø¬Ø¹Ù„ Ø§Ù„Ù†Ø§ÙØ¨Ø§Ø± ÙÙŠ ØµÙ ÙˆØ§Ø­Ø¯ */
                align-items: center; /* ØªÙˆØ³ÙŠØ· Ø§Ù„Ø¹Ù†Ø§ØµØ± */
                padding: 10px; /* ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ø­Ø´Ùˆ */
            }
    
            .search-bar {
                max-width: 100%; /* Ø¬Ø¹Ù„ Ø´Ø±ÙŠØ· Ø§Ù„Ø¨Ø­Ø« ÙŠØ£Ø®Ø° Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„ÙƒØ§Ù…Ù„ */
                margin: 0 10px; /* Ø¥Ø¶Ø§ÙØ© ØªØ¨Ø§Ø¹Ø¯ */
            }
    
            .navbar-nav {
                flex-direction: row; /* Ø¬Ø¹Ù„ Ø§Ù„Ø£Ø²Ø±Ø§Ø± ÙÙŠ ØµÙ ÙˆØ§Ø­Ø¯ */
                justify-content: space-around; /* ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø¨Ø§Ù„ØªØ³Ø§ÙˆÙŠ */
                width: 100%; /* Ø¬Ø¹Ù„ Ø§Ù„Ø£Ø²Ø±Ø§Ø± ØªØ£Ø®Ø° Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„ÙƒØ§Ù…Ù„ */
                margin-top: 10px; /* Ø¥Ø¶Ø§ÙØ© ØªØ¨Ø§Ø¹Ø¯ Ø¨ÙŠÙ† Ø´Ø±ÙŠØ· Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„Ø£Ø²Ø±Ø§Ø± */
            }
    
            .content-container {
                margin-top: 20px; /* Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ù‡Ø§Ù…Ø´ Ø§Ù„Ø¹Ù„ÙˆÙŠ Ù„ØªØ¹ÙˆÙŠØ¶ Ø§Ù„Ù†Ø§ÙØ¨Ø§Ø± */
            }
    
            .post {
                width: 95%; /* ØªÙ‚Ù„ÙŠÙ„ Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª Ù„ØªÙ†Ø§Ø³Ø¨ Ø§Ù„Ø´Ø§Ø´Ø© */
            }

            .navbar-brand {
                margin-bottom: 0; /* Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ØªØ¨Ø§Ø¹Ø¯ Ø¨ÙŠÙ† Ø§Ù„Ø´Ø¹Ø§Ø± ÙˆØ´Ø±ÙŠØ· Ø§Ù„Ø¨Ø­Ø« */
            }
        }
    
        .result-item {
            padding: 10px;
            cursor: pointer;
            border-bottom: 1px solid #eee;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 16px;
            font-weight: 500;
            background-color: #f8f9fa;
            border-radius: 5px;
            transition: background 0.3s;
        }
    
        .result-item:hover {
            background: #e2e6ea;
        }
    
        .result-item i {
            font-size: 18px;
            color: #007bff;
        }
        #floating-flower {
    position: absolute;
    width: 70px;  /* Ø­Ø¬Ù… Ø§Ù„Ø²Ù‡Ø±Ø© */
    height: 70px;
    cursor: pointer;
    transition: transform 0.3s ease-in-out, left 2s ease-in-out, top 2s ease-in-out;
}

#floating-flower img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 50%; /* Ø¬Ø¹Ù„Ù‡Ø§ Ø¯Ø§Ø¦Ø±ÙŠØ© */
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
    animation: flowerFloat 3s infinite alternate ease-in-out;
}

@keyframes flowerFloat {
    from { transform: translateY(0px); }
    to { transform: translateY(-10px); }
}

/* âœ… ØªØ­Ø³ÙŠÙ† Ù†Ø§ÙØ°Ø© Ø§Ù„Ø£Ø°ÙƒØ§Ø± */
#popup-text {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0.8);
    background: rgba(0, 0, 0, 0.85);
    color: white;
    padding: 15px 25px;
    font-size: 22px;
    border-radius: 12px;
    text-align: center;
    display: none;
    animation: fadeInOut 6s ease-in-out;
    max-width: 90%;  /* ğŸ”¹ Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø¹Ø±Ø¶ Ù„ÙŠØ³Ù…Ø­ Ø¨Ø¹Ø±Ø¶ Ø§Ù„Ù†ØµÙˆØµ Ø§Ù„Ø·ÙˆÙŠÙ„Ø© */
    white-space: normal; /* ğŸ”¹ Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨ØªÙƒØ³ÙŠØ± Ø§Ù„Ù†Øµ Ø§Ù„Ø·ÙˆÙŠÙ„ Ø¥Ù„Ù‰ Ø¹Ø¯Ø© Ø£Ø³Ø·Ø± */
    word-wrap: break-word; /* ğŸ”¹ Ø¶Ù…Ø§Ù† Ø¹Ø¯Ù… Ø®Ø±ÙˆØ¬ Ø§Ù„Ù†Øµ Ø¹Ù† Ø§Ù„Ø­Ø¯ÙˆØ¯ */
    overflow: hidden; /* ğŸ”¹ Ù…Ù†Ø¹ Ø£ÙŠ ØªØ¬Ø§ÙˆØ² ØºÙŠØ± Ù…Ø±ØºÙˆØ¨ ÙÙŠÙ‡ */
}

/* ØªØ­Ø³ÙŠÙ† Ø¸Ù‡ÙˆØ± Ø§Ù„Ù†Øµ Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© */
@media (max-width: 600px) {
    #popup-text {
        font-size: 18px;  /* ğŸ”¹ ØªÙ‚Ù„ÙŠÙ„ Ø­Ø¬Ù… Ø§Ù„Ø®Ø· Ù‚Ù„ÙŠÙ„Ø§Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ù‡ÙˆØ§ØªÙ */
        max-width: 95%;  /* ğŸ”¹ Ø¬Ø¹Ù„ Ø§Ù„Ù†Øµ ÙŠØ£Ø®Ø° Ø¹Ø±Ø¶ Ø£ÙƒØ¨Ø± */
        padding: 12px 18px;  /* ğŸ”¹ ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ø­ÙˆØ§Ù Ù‚Ù„ÙŠÙ„Ø§Ù‹ */
    }
}

/* ğŸ”¹ ØªØµÙ…ÙŠÙ… Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª */
.modal-overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    z-index: 10000;
    justify-content: center;
    align-items: center;
}

.modal-content {
    background: white;
    padding: 20px;
    border-radius: 10px;
    text-align: center;
    width: 300px;
    box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.3);
}

.close-btn {
    float: right;
    font-size: 20px;
    cursor: pointer;
}

.settings-btn {
    width: 100%;
    padding: 10px;
    margin-top: 10px;
    border: none;
    background: #000000;
    color: white;
    font-size: 16px;
    border-radius: 5px;
    cursor: pointer;
    display: block;
}

.settings-btn i {
    margin-right: 8px;
}

.settings-btn:hover {
    background: #7a7a7a;
}

.post-image-container img {
    display: block;
    max-width: 100%;
    height: auto;
}

.post-image-container img:before {
    content: none !important;
}

         /* Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø¸Ù„Ù… */
         body.dark-mode {
            background-color: #181818;
            color: #e0e0e0;
        }

        .navbar {
            background-color: #313030;
            transition: background-color 0.3s;
        }
        
        .dark-mode .navbar {
            background-color: #222;
        }

        .post {
            background-color: #ffffff;
            transition: background-color 0.3s;
        }
        
        .dark-mode .post {
            background-color: #333;
        }
        
        .dark-mode .post-content,
        .dark-mode .text-muted,
        .dark-mode .nav-link {
            color: #ffffff;
        }

        /* Ø²Ø± Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø¹ØµØ±ÙŠ */
        .toggle-switch {
            position: relative;
            width: 50px;
            height: 25px;
            background: #ddd;
            border-radius: 25px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .toggle-switch::before {
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            background: #fff;
            border-radius: 50%;
            top: 50%;
            left: 5px;
            transform: translateY(-50%);
            transition: all 0.3s;
        }

        .dark-mode .toggle-switch {
            background: #000000;
        }

        .dark-mode .toggle-switch::before {
            left: 25px;
            background: #fff;
        }
            /* âœ… ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø¸Ù„Ù… */
    body.dark-mode {
        background-color: #121212;
        color: #e0e0e0;
    }

    .dark-mode .navbar {
        background-color: #1e1e1e !important;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
    }

        /* âœ… ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ø´Ø¹Ø§Ø± ÙˆØ§Ù„Ù†Øµ ÙÙŠ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø¸Ù„Ù… */
        .dark-mode .navbar-brand {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 5px 10px;
        border-radius: 30px;
        background: linear-gradient(135deg, #3a3a3a 0%, #1e1e1e 100%);
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
        transition: all 0.3s ease;
    }

    .dark-mode .navbar-brand:hover {
        background: linear-gradient(135deg, #4a4a4a 0%, #2e2e2e 100%);
        transform: scale(1.02);
    }

    .dark-mode .navbar-brand img {
        border: 2px solid #ffffff;
        box-shadow: 0 0 10px rgba(255, 255, 255, 0.2);
    }

    .dark-mode .navbar-brand strong {
        color: #ffffff !important;
        font-size: 1.2rem;
        font-weight: 700;
        text-shadow: 0 0 5px rgba(255, 255, 255, 0.3);
        letter-spacing: 1px;
    }

    /* ØªØ£Ø«ÙŠØ± Ø¥Ø¶Ø§ÙÙŠ Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± */
    .dark-mode .navbar-brand:active {
        transform: scale(0.98);
    }

    /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„Ù‡ÙˆØ§ØªÙ */
    @media (max-width: 700px) {
        .dark-mode .navbar-brand {
            padding: 3px 8px;
        }
        
        .dark-mode .navbar-brand strong {
            font-size: 1rem;
        }
    }

    .dark-mode .post {
        background-color: #1e1e1e;
        color: #e0e0e0;
        border: 1px solid #333;
    }

    .dark-mode .post-content,
    .dark-mode .text-muted,
    .dark-mode .mb-0 a {
        color: #e0e0e0 !important;
    }

    .dark-mode .comment {
        background-color: #2d2d2d;
        color: #e0e0e0;
    }

    /* âœ… ØªØ­Ø³ÙŠÙ†Ø§Øª Ø­Ù‚Ù„ Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø¸Ù„Ù… */
    .dark-mode .search-bar {
        background-color: #2d2d2d;
        color: #ffffff !important;  /* Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ù„ÙˆÙ† Ø§Ù„Ù†Øµ Ø£Ø¨ÙŠØ¶ */
        border-color: #555;
    }

    .dark-mode .search-bar::placeholder {
        color: #a0a0a0 !important;  /* Ù„ÙˆÙ† Ø§Ù„Ù†Øµ Ø§Ù„Ù…Ø¤Ù‚Øª (placeholder) */
    }

    /* âœ… ØªØ­Ø³ÙŠÙ†Ø§Øª Ø¹Ø§Ù…Ø© Ù„Ù„Ù†ØµÙˆØµ ÙÙŠ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø¸Ù„Ù… */
    .dark-mode input,
    .dark-mode textarea,
    .dark-mode select {
        color: #ffffff !important;
        background-color: #2d2d2d;
    }

    .dark-mode .form-control {
        color: #ffffff !important;
        background-color: #2d2d2d;
    }

    /* âœ… ØªØ­Ø³ÙŠÙ† Ø±Ø¤ÙŠØ© Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ÙÙŠ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø¸Ù„Ù… */
    .dark-mode .search-results {
        background-color: #2d2d2d;
        border: 1px solid #444;
    }

    .dark-mode .result-item {
        background-color: #2d2d2d;
        color: #ffffff !important;
    }

    .dark-mode .result-item:hover {
        background-color: #3d3d3d;
    }


    .dark-mode .form-control {
        background-color: #2d2d2d;
        color: #ffffff;
        border-color: #444;
    }

    .dark-mode .btn-primary {
        background-color: #0d6efd;
        border-color: #0d6efd;
    }

    /* ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø£Ù„ÙˆØ§Ù† ÙÙŠ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø¸Ù„Ù… */
    .dark-mode .text-muted {
        color: #a0a0a0 !important;
    }

    .dark-mode .btn-outline-danger {
        color: #ff6b6b;
        border-color: #ff6b6b;
    }

    .dark-mode .btn-outline-danger:hover {
        background-color: #dc3545;
        color: white;
    }
     /* âœ… ØªØ­Ø³ÙŠÙ†Ø§Øª Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ÙÙŠ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø¸Ù„Ù… */
     .dark-mode .modal-content {
        background-color: #f8f9fa !important;
    }

    .dark-mode .modal-content h2,
    .dark-mode .modal-content h4,
    .dark-mode .modal-content span,
    .dark-mode .modal-content i {
        color: #000000 !important;
    }

    .dark-mode .toggle-container span {
        color: #000000 !important;
    }

    .dark-mode .close-btn {
        color: #000000 !important;
    }

    .dark-mode .form-control.comment-input {
    background-color: #2d2d2d !important;
    color: #ffffff !important;
    border-color: #444 !important;
}

.dark-mode .form-control.comment-input::placeholder {
    color: #a0a0a0 !important;
}

/* âœ… Ø£Ù†Ù…Ø§Ø· Ù‚Ø³Ù… Ø§Ù„Ù‚ØµØµ */
.stories-container {
    background-color: white;
    border-radius: 10px;
    padding: 20px;
    margin: 20px auto;
    width: 90%;
    max-width: 600px;
    box-shadow: 0px 2px 10px rgba(0, 0, 0, 0.1);
    overflow-x: auto;
    white-space: nowrap;
}

.dark-mode .stories-container {
    background-color: #1e1e1e;
    border: 1px solid #333;
}
.stories-container {
    margin-top: 100px; /* ØªØ¹Ø¯ÙŠÙ„ Ù‡Ø°Ù‡ Ø§Ù„Ù‚ÙŠÙ…Ø© Ø­Ø³Ø¨ Ø§Ø­ØªÙŠØ§Ø¬Ùƒ */
    position: relative;
    z-index: 1;
}
.stories-wrapper {
    display: flex;
    gap: 15px;
}

.story-item {
    display: inline-block;
    text-align: center;
    cursor: pointer;
    width: 80px;
}

.story-avatar {
    position: relative;
    width: 70px;
    height: 70px;
    border-radius: 50%;
    padding: 2px;
    background: linear-gradient(45deg, #f09433, #e6683c, #dc2743, #cc2366, #bc1888);
}

.story-avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 50%;
    border: 2px solid white;
    display: block;
}

.story-item.add-story .story-avatar {
    background: #e4e6eb;
}

.dark-mode .story-item.add-story .story-avatar {
    background: #3e3e3e;
}

.add-icon {
    position: absolute;
    bottom: 0;
    right: 0;
    background: #1877f2;
    color: white;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
    border: 2px solid white;
}

.story-author {
    margin-top: 5px;
    font-size: 12px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.dark-mode .story-author {
    color: #e0e0e0;
}

/* âœ… ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„Ù‡ÙˆØ§ØªÙ */
@media (max-width: 700px) {
    .stories-container {
    margin-top: 150px; /* ØªØ¹Ø¯ÙŠÙ„ Ù‡Ø°Ù‡ Ø§Ù„Ù‚ÙŠÙ…Ø© Ø­Ø³Ø¨ Ø§Ø­ØªÙŠØ§Ø¬Ùƒ */
    position: relative;
    z-index: 1;
}
    
.story-item {
    margin-bottom: 1px; /* ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ù…Ø³Ø§ÙØ© */
}

.post {
    margin-top: 1px; /* ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ù…Ø³Ø§ÙØ© */
}

    
    .story-avatar {
        width: 60px;
        height: 60px;
    }
}

/* Ø£Ù†Ù…Ø§Ø· Ù†Ø§ÙØ°Ø© Ø¹Ø±Ø¶ Ø§Ù„Ù‚ØµØ© */
#story-viewer {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.9);
    z-index: 9999;
    display: flex;
    justify-content: center;
    align-items: center;
}

.story-modal {
    width: 100%;
    max-width: 500px;
    height: 90vh;
    position: relative;
}

.story-header {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    padding: 15px;
    display: flex;
    align-items: center;
    background: linear-gradient(to bottom, rgba(0,0,0,0.7) 0%, transparent 100%);
    z-index: 1;
}

.story-header img {
    width: 40px;
    height: 40px;
    margin-right: 10px;
    border: 2px solid white;
}

.story-header span {
    color: white;
    font-weight: bold;
}

.close-story {
    position: absolute;
    right: 15px;
    top: 15px;
    background: none;
    border: none;
    color: white;
    font-size: 30px;
    cursor: pointer;
}

.story-content {
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
}

.story-content img {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
}

.story-progress {
    position: absolute;
    top: 10px;
    left: 10px;
    right: 10px;
    height: 3px;
    background-color: rgba(255, 255, 255, 0.3);
    border-radius: 3px;
}

.progress-bar {
    height: 100%;
    background-color: white;
    width: 0%;
    border-radius: 3px;
    transition: width 0.1s linear;
}

/* ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„Ø¬ÙˆØ§Ù„ */
@media (max-width: 576px) {
    .story-modal {
        height: 100vh;
    }
    
    .story-header {
        padding: 10px;
    }
    
    .story-header img {
        width: 35px;
        height: 35px;
    }
}

/* Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª */
.notifications-container {
    position: fixed;
    top: 70px;
    right: 20px;
    width: 350px;
    max-height: 500px;
    overflow-y: auto;
    background-color: white;
    border-radius: 10px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    z-index: 1050;
    display: none;
}

.notifications-list {
    padding: 10px;
}

.notification-item {
    padding: 10px;
    border-bottom: 1px solid #eee;
    cursor: pointer;
    transition: background 0.3s;
}

.notification-item:hover {
    background-color: #f8f9fa;
}

.notification-item.unread {
    background-color: #f0f8ff;
}

.notification-item .notification-content {
    display: flex;
    align-items: center;
    gap: 10px;
}

.notification-item img {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    object-fit: cover;
}

.notification-time {
    font-size: 12px;
    color: #6c757d;
    margin-top: 5px;
}

.dark-mode .notifications-container {
    background-color: #2d2d2d;
    border: 1px solid #444;
}

.dark-mode .notification-item {
    border-bottom-color: #444;
}

.dark-mode .notification-item:hover {
    background-color: #3d3d3d;
}

.dark-mode .notification-item.unread {
    background-color: #1e3a5f;
}

.dark-mode .notification-time {
    color: #a0a0a0;
}

.notification-preview {
    font-size: 12px;
    color: #666;
    margin-top: 4px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.dark-mode .notification-preview {
    color: #aaa;
}

/* Ø¥Ø¶Ø§ÙØ© ØªØ£Ø«ÙŠØ± Ù„Ù„ØªÙ†Ø¨ÙŠÙ‡ Ø¹Ù†Ø¯ ÙˆØ¬ÙˆØ¯ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø¬Ø¯ÙŠØ¯Ø© */
@keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.1); }
    100% { transform: scale(1); }
}

.has-notifications {
    animation: pulse 1s infinite;
}

/* ØªØ­Ø³ÙŠÙ† Ø¸Ù‡ÙˆØ± Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª */
.notification-item {
    transition: all 0.3s ease;
}

.notification-item.unread {
    background-color: #f0f8ff;
    border-left: 3px solid #007bff;
}

.notification-item:hover {
    background-color: #e9ecef;
    transform: translateX(5px);
}
.notification-link {
    display: block;
    text-decoration: none;
    color: inherit;
}
.notification-link:hover {
    background-color: #f0f0f0;
}

.settings-section {
    padding: 15px;
    border-radius: 8px;
    background-color: #f8f9fa;
    margin-bottom: 15px;
}

.dark-mode .settings-section {
    background-color: #2d2d2d;
    border: 1px solid #444;
}

.form-group {
    margin-bottom: 10px;
}

.form-control {
    width: 100%;
    padding: 8px 12px;
    border-radius: 5px;
    border: 1px solid #ddd;
    background-color: white;
}

/* ØªØ­Ø³ÙŠÙ†Ø§Øª Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ÙÙŠ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø¸Ù„Ù… */
.dark-mode .modal-content {
    background-color: #2d2d2d !important;
    color: #e0e0e0;
    border: 1px solid #444;
}

.dark-mode .modal-content h2,
.dark-mode .modal-content h4,
.dark-mode .modal-content span,
.dark-mode .modal-content i {
    color: #e0e0e0 !important;
}

.dark-mode .toggle-container span {
    color: #e0e0e0 !important;
}

.dark-mode .close-btn {
    color: #e0e0e0 !important;
}

.dark-mode .settings-section {
    background-color: #3d3d3d;
    border: 1px solid #555;
}

.dark-mode .form-control {
    background-color: #444;
    color: #e0e0e0;
    border-color: #555;
}

.dark-mode .form-control:focus {
    background-color: #444;
    color: #e0e0e0;
    border-color: #1877f2;
    box-shadow: 0 0 0 0.25rem rgba(24, 119, 242, 0.25);
}

.dark-mode .settings-btn {
    background-color: #000000;
    color: white;
}

.dark-mode .settings-btn:hover {
    background-color: #000000;
}

   /* âœ… ØªØ­Ø³ÙŠÙ†Ø§Øª Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù„Ù„Ù‡ÙˆØ§ØªÙ */
   @media (max-width: 700px) {
        .modal-content {
            width: 90% !important;  /* Ø¬Ø¹Ù„ Ø§Ù„Ù†Ø§ÙØ°Ø© ØªØ£Ø®Ø° 90% Ù…Ù† Ø¹Ø±Ø¶ Ø§Ù„Ø´Ø§Ø´Ø© */
            max-width: 100% !important;
            padding: 15px !important;
            margin: 10px !important;
        }
        
        .settings-section {
            padding: 10px !important;
            margin-bottom: 10px !important;
        }
        
        .settings-btn {
            padding: 8px !important;
            font-size: 14px !important;
        }
        
        .form-control {
            padding: 6px 10px !important;
            font-size: 14px !important;
        }
        
        .modal-content h2 {
            font-size: 20px !important;
        }
        
        .modal-content h4 {
            font-size: 16px !important;
        }
        
        .close-btn {
            font-size: 24px !important;
        }
        
        .toggle-container {
            gap: 5px !important;
        }
        
        .toggle-switch {
            width: 40px !important;
            height: 20px !important;
        }
        
        .toggle-switch::before {
            width: 16px !important;
            height: 16px !important;
        }
        
        .dark-mode .toggle-switch::before {
            left: 19px !important;
        }
    }
   
        /* âœ… ØªØ­Ø³ÙŠÙ† Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ø¹Ø§Ù… Ù„Ù„Ù†Ø§ÙØ¨Ø§Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯ */
/* Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ù†Ø§ÙØ¨Ø§Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© */
.navbar {
    padding: 8px 15px !important;
}

.navbar .container {
    display: flex;
    flex-direction: column;
    align-items: center;
}

.app-name {
    font-size: 1.2rem;
    font-weight: bold;
    color: #000;
}

.dark-mode .app-name {
    color: #fff;
}

.navbar-nav {
    width: 100%;
    padding: 5px 0;
}

/* ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„Ù‡ÙˆØ§ØªÙ */
@media (max-width: 700px) {
    .navbar {
        padding: 5px !important;
    }
    
    .app-name {
        font-size: 1rem;
    }
    
    .navbar .d-flex.justify-content-between {
        gap: 5px;
    }
    
    .navbar .d-flex.justify-content-between .nav-link {
        padding: 5px;
    }
    
    .navbar-nav {
        padding: 0;
    }
    
    .navbar-nav .nav-link {
        padding: 5px 8px;
        font-size: 14px;
    }
    
    /* ØªØ¹Ø¯ÙŠÙ„ Ø¹Ø±Ø¶ Ø´Ø±ÙŠØ· Ø§Ù„Ø¨Ø­Ø« Ø¹Ù„Ù‰ Ø§Ù„Ù‡ÙˆØ§ØªÙ */
    .navbar .d-flex.justify-content-between > div {
        width: 70% !important;
    }
}

/* Ø£Ù†Ù…Ø§Ø· Ù†Ø§ÙØ°Ø© Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø« */
.search-results {
    position: fixed;
    top: 120px; /* ØªØ¹Ø¯ÙŠÙ„ Ø­Ø³Ø¨ Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ù†Ø§ÙØ¨Ø§Ø± */
    left: 50%;
    transform: translateX(-50%);
    width: 90%;
    max-width: 600px;
    max-height: 60vh;
    overflow-y: auto;
    background-color: white;
    border-radius: 10px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    z-index: 999;
    display: none;
}

.dark-mode .search-results {
    background-color: #2d2d2d;
    border: 1px solid #444;
}

.search-results .result-item {
    padding: 12px 15px;
    border-bottom: 1px solid #eee;
}

.dark-mode .search-results .result-item {
    border-bottom-color: #444;
}

/* ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„Ù‡ÙˆØ§ØªÙ */
@media (max-width: 700px) {
    .search-results {
        top: 150px; /* ØªØ¹Ø¯ÙŠÙ„ Ø­Ø³Ø¨ Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ù†Ø§ÙØ¨Ø§Ø± Ø¹Ù„Ù‰ Ø§Ù„Ù‡ÙˆØ§ØªÙ */
        width: 95%;
    }
}

.verified-badge {
    color: #1DA1F2;
    font-size: 0.8em;
    margin-right: 3px;
    vertical-align: middle;
}

.dark-mode .verified-badge {
    color: #1DA1F2;
}
    
    /* Ù†Ø§ÙØ°Ø© Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© */
    .message-popup {
        position: fixed;
        bottom: 20px;
        right: 20px;
        width: 300px;
        background: white;
        border-radius: 10px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        z-index: 9999;
        display: none;
        overflow: hidden;
        animation: slideIn 0.3s ease-out;
        border: 1px solid #ddd;
    }

    @keyframes slideIn {
        from { transform: translateX(100%); }
        to { transform: translateX(0); }
    }

    .message-popup-header {
        background: var(--primary-color);
        color: white;
        padding: 10px 15px;
        display: flex;
        align-items: center;
        justify-content: space-between;
    }

    .message-popup-close {
        background: none;
        border: none;
        color: white;
        font-size: 18px;
        cursor: pointer;
    }

    .message-popup-body {
        padding: 15px;
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .message-popup-avatar {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        object-fit: cover;
    }

    .message-popup-content {
        flex: 1;
    }

    .message-popup-sender {
        font-weight: bold;
        margin-bottom: 5px;
    }

    .message-popup-text {
        color: #555;
        font-size: 14px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    .message-popup-footer {
        padding: 10px;
        border-top: 1px solid #eee;
        text-align: right;
    }

    .message-popup-btn {
        background: var(--primary-color);
        color: white;
        border: none;
        padding: 5px 10px;
        border-radius: 4px;
        font-size: 12px;
        cursor: pointer;
    }

    /* Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø¸Ù„Ù… */
    .dark-mode .message-popup {
        background: #2d2d2d;
        border-color: #444;
    }

    .dark-mode .message-popup-text {
        color: #e0e0e0;
    }

    .dark-mode .message-popup-footer {
        border-top-color: #444;
    }
    .btn-danger {
    background-color: #dc3545 !important;
    border-color: #dc3545 !important;
}

.btn-danger:hover {
    background-color: #c82333 !important;
    border-color: #bd2130 !important;
}

.dark-mode .btn-danger {
    background-color: #dc3545 !important;
    border-color: #dc3545 !important;
}

.dark-mode .btn-danger:hover {
    background-color: #c82333 !important;
    border-color: #bd2130 !important;
}

.text-danger {
    color: #dc3545 !important;
}

    /* âœ… ØªØ­Ø³ÙŠÙ† ØªØµÙ…ÙŠÙ… Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª Ù„ÙÙŠØ³Ø¨ÙˆÙƒ Ù„Ø§ÙŠØª */
    .post {
        background-color: #ffffff;
        border-radius: 0;
        padding: 12px 16px;
        width: 100%;
        max-width: 100%;
        box-shadow: none;
        margin-bottom: 10px;
        border-bottom: 1px solid #e4e6eb;
    }

    .dark-mode .post {
        background-color: #1e1e1e;
        border-bottom-color: #333;
    }

    /* Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù‡ÙˆØ§Ù…Ø´ Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© Ø¹Ù„Ù‰ Ø§Ù„Ù‡ÙˆØ§ØªÙ */
    @media (max-width: 700px) {
        .post {
            padding: 10px 12px;
            margin-bottom: 8px;
        }
        
        .content-container {
            padding-left: 0;
            padding-right: 0;
        }
    }

    /* ØªØ­Ø³ÙŠÙ† Ø§Ù„Ù…Ø³Ø§ÙØ§Øª Ø¨ÙŠÙ† Ø§Ù„Ø¹Ù†Ø§ØµØ± */
    .post-header {
        margin-bottom: 8px;
    }

    .post-content {
        margin: 10px 0;
        font-size: 15px;
        line-height: 1.4;
    }

    .post-actions {
        padding: 8px 0 4px;
    }

    /* ØªØ­Ø³ÙŠÙ† ØµÙˆØ± Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª */
    .post-image-container img {
        width: 100%;
        max-height: 500px;
        object-fit: contain;
        border-radius: 0;
    }

    /* ØªØ­Ø³ÙŠÙ† Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª */
    video {
        width: 100%;
        max-height: 500px;
        background-color: #000;
    }

    /* ØªØ­Ø³ÙŠÙ† Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª */
    .comments-section {
        margin-top: 8px;
        padding-top: 8px;
    }

    .comment {
        padding: 6px 8px;
        margin-bottom: 4px;
    }

    /* âœ… ØªØ­Ø³ÙŠÙ† ØªØµÙ…ÙŠÙ… Ø§Ù„Ù‚ØµØµ Ù„ÙÙŠØ³Ø¨ÙˆÙƒ Ù„Ø§ÙŠØª */
    .stories-container {
        background-color: white;
        border-radius: 0;
        padding: 12px 0;
        margin: 0;
        width: 100%;
        max-width: 100%;
        box-shadow: none;
        border-bottom: 1px solid #e4e6eb;
        overflow-x: auto;
        white-space: nowrap;
        position: relative;
        z-index: 1;
    }

    .dark-mode .stories-container {
        background-color: #1e1e1e;
        border-bottom-color: #333;
    }

    .stories-wrapper {
        display: inline-flex;
        gap: 12px;
        padding: 0 12px;
    }

    .story-item {
        display: inline-block;
        text-align: center;
        cursor: pointer;
        width: 80px;
        vertical-align: top;
    }

    .story-avatar {
        position: relative;
        width: 64px;
        height: 64px;
        border-radius: 50%;
        padding: 2px;
        background: linear-gradient(45deg, #f09433, #e6683c, #dc2743, #cc2366, #bc1888);
        margin: 0 auto;
    }

    .story-avatar img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        border-radius: 50%;
        border: 2px solid white;
        display: block;
    }

    .story-item.add-story .story-avatar {
        background: #e4e6eb;
    }

    .dark-mode .story-item.add-story .story-avatar {
        background: #3e3e3e;
    }

    .add-icon {
        position: absolute;
        bottom: 0;
        right: 0;
        background: #1877f2;
        color: white;
        width: 20px;
        height: 20px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 14px;
        border: 2px solid white;
    }

    .story-author {
        margin-top: 6px;
        font-size: 12px;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        color: #333;
    }

    .dark-mode .story-author {
        color: #e0e0e0;
    }

    /* âœ… ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„Ù‡ÙˆØ§ØªÙ */
    @media (max-width: 700px) {
        .stories-container {
            padding: 10px 0;
        }
        
        .stories-wrapper {
            gap: 8px;
            padding: 0 8px;
        }
        
        .story-item {
            width: 70px;
        }
        
        .story-avatar {
            width: 56px;
            height: 56px;
        }
        
        .story-author {
            font-size: 11px;
        }
    }

    /* âœ… ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„Ù‡ÙˆØ§ØªÙ */
    @media (max-width: 700px) {
        .stories-container {
            margin-top: 70px; /* ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ù‡Ø§Ù…Ø´ Ø§Ù„Ø¹Ù„ÙˆÙŠ Ù„ÙŠØªÙ†Ø§Ø³Ø¨ Ù…Ø¹ Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ù†Ø§ÙØ¨Ø§Ø± */
            padding: 10px 0;
            position: relative;
            z-index: 1;
        }
        
        .content-container {
            margin-top: 70px; /* ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ù†ÙØ³ Ù‡Ø§Ù…Ø´ Ø§Ù„Ù‚ØµØµ */
        }
        
        .stories-wrapper {
            gap: 8px;
            padding: 0 8px;
        }
        
        .story-item {
            width: 70px;
            margin-bottom: 0;
        }
        
        .story-avatar {
            width: 56px;
            height: 56px;
        }
        
        .story-author {
            font-size: 11px;
        }
        
        .post {
            margin-top: 0;
            border-radius: 0;
            width: 100%;
        }
    }
</style>
<style>
    /* âœ… ØªØ­Ø³ÙŠÙ† Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ø¹Ø§Ù… */
    body {
        font-family: Arial, sans-serif;
        background-color: #f0f2f5;
        margin: 0;
        padding: 0;
        direction: rtl; /* Ø¥Ø¶Ø§ÙØ© Ù‡Ø°Ù‡ Ø§Ù„Ø®Ø§ØµÙŠØ© */
        text-align: right; /* Ù…Ø­Ø§Ø°Ø§Ø© Ø§Ù„Ù†Øµ Ù„Ù„ÙŠÙ…ÙŠÙ† */
    }

    /* âœ… ØªØ¹Ø¯ÙŠÙ„Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© Ù„Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø£Ø®Ø±Ù‰ */
    .post-header, 
    .post-actions, 
    .comments-section,
    .notification-item .notification-content,
    .story-item,
    .stories-wrapper,
    .navbar-nav {
        direction: rtl;
    }

    /* ØªØ¹Ø¯ÙŠÙ„Ø§Øª Ù„Ù…Ø­Ø§Ø°Ø§Ø© Ø§Ù„Ø¹Ù†Ø§ØµØ± */
    .search-bar {
        margin-left: 0;
        margin-right: 20px; /* Ù†Ù‚Ù„ Ø§Ù„Ù…Ø³Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ø¬Ø§Ù†Ø¨ Ø§Ù„Ø£ÙŠÙ…Ù† */
    }

    /* ØªØ¹Ø¯ÙŠÙ„Ø§Øª Ù„Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø¸Ù„Ù… */
    .dark-mode body {
        direction: rtl;
    }

    /* âœ… ØªØ¹Ø¯ÙŠÙ„Ø§Øª Ù„Ù„Ù‡ÙˆØ§ØªÙ */
    @media (max-width: 700px) {
        body {
            direction: rtl;
        }
        
        .search-bar {
            margin-right: 10px;
            margin-left: 0;
        }
    }

    /* Ø¨Ø§Ù‚ÙŠ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ ÙŠØ¨Ù‚Ù‰ ÙƒÙ…Ø§ Ù‡Ùˆ */
    /* ... */
</style>
<style>
    /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù„Ù„Ù‡ÙˆØ§ØªÙ */
    .modal-content {
        max-height: 90vh;
        overflow-y: auto;
        -webkit-overflow-scrolling: touch; /* Ù„Ø³Ù„Ø§Ø³Ø© Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø¹Ù„Ù‰ iOS */
    }

    @media (max-width: 700px) {
        .modal-overlay {
            align-items: flex-start; /* Ù…Ø­Ø§Ø°Ø§Ø© Ù…Ù† Ø§Ù„Ø£Ø¹Ù„Ù‰ Ù„Ù„Ù‡ÙˆØ§ØªÙ */
            padding-top: 20px;
            padding-bottom: 20px;
        }
        
        .modal-content {
            width: 95% !important;
            max-height: 85vh;
            margin: 0 auto;
        }
        
        .settings-section {
            padding: 12px !important;
            margin-bottom: 12px !important;
        }
        
        /* ØªØ­Ø³ÙŠÙ† Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ */
        .modal-content::-webkit-scrollbar {
            width: 5px;
        }
        
        .modal-content::-webkit-scrollbar-thumb {
            background-color: rgba(0,0,0,0.2);
            border-radius: 10px;
        }
    }
    /* Ø£Ù†Ù…Ø§Ø· Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø¹Ø¯Ù„Ø© */
.modal-overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    z-index: 10000;
    justify-content: center;
    align-items: center;
}

.modal-content {
    background: white;
    border-radius: 12px;
    width: 90%;
    max-width: 400px;
    max-height: 90vh;
    overflow-y: auto;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
}

.modal-header {
    padding: 15px 20px;
    position: sticky;
    top: 0;
    background: inherit;
    z-index: 1;
}

.modal-body {
    padding: 0 20px 20px;
}

.close-btn {
    background: none;
    border: none;
    font-size: 1.5rem;
    cursor: pointer;
    padding: 0;
    opacity: 0.7;
    transition: opacity 0.2s;
}

.close-btn:hover {
    opacity: 1;
}

.section-title {
    font-size: 1.1rem;
    font-weight: 600;
    color: #333;
    margin-bottom: 15px;
}

.settings-section {
    padding: 15px;
    border-radius: 10px;
    background-color: #f8f9fa;
    margin-bottom: 20px;
    border: 1px solid #eee;
}

.settings-btn {
    padding: 10px;
    border: none;
    background: #000000;
    color: white;
    font-size: 16px;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.3s;
    display: flex;
    align-items: center;
    justify-content: center;
}

.settings-btn:hover {
    background: #333;
    transform: translateY(-2px);
}

.settings-btn:active {
    transform: translateY(0);
}

/* Ø£Ù†Ù…Ø§Ø· Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø¸Ù„Ù… */
.dark-mode .modal-content {
    background-color: #2d2d2d;
    color: #e0e0e0;
}

.dark-mode .modal-header {
    border-bottom-color: #444;
}

.dark-mode .section-title {
    color: #e0e0e0;
}

.dark-mode .settings-section {
    background-color: #3d3d3d;
    border-color: #444;
}

.dark-mode .close-btn {
    color: #ffffff;
}

.dark-mode .form-control {
    background-color: #444;
    color: #e0e0e0;
    border-color: #555;
}

.dark-mode .form-control::placeholder {
    color: #aaa;
}

.dark-mode .settings-btn {
    background-color: #000000;
    color: white;
}

.dark-mode .settings-btn:hover {
    background-color: #333;
}

/* ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„Ù‡ÙˆØ§ØªÙ */
@media (max-width: 700px) {
    .modal-content {
        width: 95% !important;
        max-width: 100%;
    }
    
    .modal-header, .modal-body {
        padding: 12px 15px;
    }
    
    .settings-section {
        padding: 12px;
        margin-bottom: 15px;
    }
    
    .settings-btn {
        padding: 8px;
        font-size: 14px;
    }
}
</style>
<style>
    /* âœ… ØªØ­Ø³ÙŠÙ† Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ø¹Ø§Ù… */
    body {
        font-family: Arial, sans-serif;
        background-color: #f0f2f5;
        margin: 0;
        padding: 0;
        direction: rtl;
        text-align: right;
        transition: background-color 0.3s, color 0.3s;
    }

    /* âœ… Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ù†Ø§ÙØ¨Ø§Ø± Ø§Ù„Ø¹Ù„ÙˆÙŠ */
    .top-navbar {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        background-color: #ffffff;
        padding: 10px 15px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        z-index: 1000;
        display: flex;
        justify-content: space-between;
        align-items: center;
        transition: background-color 0.3s;
    }

    /* âœ… Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ù†Ø§ÙØ¨Ø§Ø± Ø§Ù„Ø³ÙÙ„ÙŠ */
    .bottom-navbar {
        position: fixed;
        bottom: 0;
        left: 0;
        width: 100%;
        background-color: #ffffff;
        padding: 10px 0;
        box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
        z-index: 1000;
        display: flex;
        justify-content: space-around;
        align-items: center;
        transition: background-color 0.3s;
    }

    /* âœ… Ø²Ø± Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ù†Ø´ÙˆØ± ÙÙŠ Ø§Ù„ÙˆØ³Ø· */
    .create-post-btn {
        position: relative;
        bottom: 25px;
        background: linear-gradient(135deg, #0095f6, #0064e0);
        color: white;
        width: 50px;
        height: 50px;
        border-radius: 50%;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 20px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        border: none;
        z-index: 1001;
    }

    /* âœ… ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø³Ø§Ø­Ø© Ù„Ù„Ù…Ø­ØªÙˆÙ‰ */
    .content-container {
        margin-top: 70px; /* Ù‡Ø§Ù…Ø´ Ø£Ø¹Ù„Ù‰ Ù„ØªØ¹ÙˆÙŠØ¶ Ø§Ù„Ù†Ø§ÙØ¨Ø§Ø± Ø§Ù„Ø¹Ù„ÙˆÙŠ */
        margin-bottom: 80px; /* Ù‡Ø§Ù…Ø´ Ø£Ø³ÙÙ„ Ù„ØªØ¹ÙˆÙŠØ¶ Ø§Ù„Ù†Ø§ÙØ¨Ø§Ø± Ø§Ù„Ø³ÙÙ„ÙŠ */
        padding: 15px;
    }

    /* âœ… Ø£Ù†Ù…Ø§Ø· Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ */
    body.dark-mode {
        background-color: #121212;
        color: #e0e0e0;
    }

    .dark-mode .top-navbar,
    .dark-mode .bottom-navbar {
        background-color: #1e1e1e;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
    }

    .dark-mode .create-post-btn {
        background: linear-gradient(135deg, #0084ff, #0062c4);
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
    }

    .dark-mode .nav-link {
        color: #e0e0e0 !important;
    }

    /* âœ… ØªØ¹Ø¯ÙŠÙ„Ø§Øª Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª */
    .nav-link {
        display: flex;
        flex-direction: column;
        align-items: center;
        color: #333;
        text-decoration: none;
        font-size: 12px;
        padding: 5px 10px;
    }

    .nav-link i {
        font-size: 20px;
        margin-bottom: 3px;
    }

    /* âœ… ØªØ¹Ø¯ÙŠÙ„Ø§Øª Ù„Ù„Ù‡ÙˆØ§ØªÙ */
    @media (max-width: 700px) {
        .top-navbar, .bottom-navbar {
            padding: 8px;
        }
        
        .content-container {
            margin-top: 60px;
            margin-bottom: 70px;
            padding: 10px;
        }
        
        .create-post-btn {
            width: 45px;
            height: 45px;
            font-size: 18px;
            bottom: 20px;
        }
        
        .nav-link {
            font-size: 10px;
            padding: 5px;
        }
        
        .nav-link i {
            font-size: 18px;
        }
    }
/* ØªØ­Ø³ÙŠÙ† Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª */
.nav-link .badge {
    font-size: 10px;
    padding: 4px 6px;
    min-width: 18px;
    display: flex;
    justify-content: center;
    align-items: center;
    transform: translate(-30%, -30%);
    top: 15%;
    right: 15%;
    line-height: 1;
}

@media (max-width: 700px) {
    .nav-link .badge {
        top: 10%;
        right: 10%;
        font-size: 9px;
        padding: 3px 5px;
        min-width: 16px;
    }
}

/* ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ù†Ø§ÙØ¨Ø§Ø± Ø§Ù„Ø¹Ù„ÙˆÙŠ Ù„Ù„Ù‡ÙˆØ§ØªÙ */
@media (max-width: 700px) {
    .top-navbar {
        padding: 8px 10px !important;
        flex-wrap: wrap;
        height: auto;
    }
    
    .top-navbar > div {
        width: 100%;
        margin-bottom: 5px;
    }
    
    .top-navbar > div:last-child {
        margin-bottom: 0;
    }
    
    /* Ø´Ø±ÙŠØ· Ø§Ù„Ø¨Ø­Ø« */
    .top-navbar > div:nth-child(2) {
        order: 3;
        width: 100%;
        margin-top: 5px;
    }
    
    /* Ø²Ø± Ø§Ù„Ø®Ø±ÙˆØ¬ ÙˆØ§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„ */
    .top-navbar > div:first-child {
        order: 1;
        width: auto;
    }
    
    /* Ø§Ù„Ø´Ø¹Ø§Ø± ÙˆØ§Ø³Ù… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ */
    .top-navbar > div:last-child {
        order: 2;
        margin-left: auto;
    }
    
    /* ØªØµØºÙŠØ± Ø­Ø¬Ù… Ø§Ù„ØµÙˆØ± */
    .top-navbar img {
        width: 35px !important;
        height: 35px !important;
    }
    
    /* ØªØµØºÙŠØ± Ø­Ø¬Ù… Ø´Ø±ÙŠØ· Ø§Ù„Ø¨Ø­Ø« */
    .search-bar {
        padding: 6px 12px;
        font-size: 14px;
    }
    
    /* ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø³Ø§Ø­Ø© Ù„Ù„Ù…Ø­ØªÙˆÙ‰ */
    .content-container {
        margin-top: 120px; /* Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ù‡Ø§Ù…Ø´ Ø§Ù„Ø¹Ù„ÙˆÙŠ Ù„ØªØ¹ÙˆÙŠØ¶ Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ù†Ø§ÙØ¨Ø§Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯ */
    }
    
    /* ØªØ¹Ø¯ÙŠÙ„ Ù…Ø³Ø§ÙØ© Ø§Ù„Ù‚ØµØµ */
    .stories-container {
        margin-top: 120px !important;
    }
}
    /* Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ø£Ù†Ù…Ø§Ø· ØªØ¨Ù‚Ù‰ ÙƒÙ…Ø§ Ù‡ÙŠ */
</style>// Ø¥Ø¶Ø§ÙØ© Ù‡Ø°Ø§ Ø§Ù„Ù†Ù…Ø· Ù„Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ø¥Ø¶Ø§ÙÙŠØ©
<style>
    .top-navbar.scrolled {
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    
    @media (max-width: 700px) {
        .top-navbar.scrolled {
            padding: 5px 10px !important;
        }
    }
    /* Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ù†Ø§ÙØ¨Ø§Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© */
.top-navbar {
    padding: 10px 15px !important;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.app-name {
    font-size: 1.2rem;
    font-weight: bold;
    color: #000;
}

.dark-mode .app-name {
    color: #fff;
}

/* ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„Ù‡ÙˆØ§ØªÙ */
@media (max-width: 700px) {
    .top-navbar {
        padding: 8px 10px !important;
    }
    
    .app-name {
        font-size: 1rem;
    }
    
    /* ØªØµØºÙŠØ± Ø­Ø¬Ù… Ø§Ù„ØµÙˆØ± */
    .top-navbar img {
        width: 35px !important;
        height: 35px !important;
    }
    
    /* ØªØµØºÙŠØ± Ø­Ø¬Ù… Ø´Ø±ÙŠØ· Ø§Ù„Ø¨Ø­Ø« */
    .search-bar {
        padding: 6px 12px;
        font-size: 14px;
    }
    
    /* ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø³Ø§Ø­Ø© Ù„Ù„Ù…Ø­ØªÙˆÙ‰ */
    .content-container {
        margin-top: 120px; /* Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ù‡Ø§Ù…Ø´ Ø§Ù„Ø¹Ù„ÙˆÙŠ Ù„ØªØ¹ÙˆÙŠØ¶ Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ù†Ø§ÙØ¨Ø§Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯ */
    }
    
    /* ØªØ¹Ø¯ÙŠÙ„ Ù…Ø³Ø§ÙØ© Ø§Ù„Ù‚ØµØµ */
    .stories-container {
        margin-top: 120px !important;
    }
}
.top-navbar.scrolled {
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

@media (max-width: 700px) {
    .top-navbar.scrolled {
        padding: 5px 10px !important;
    }
}
</style>
<style>
    #close-notifications {
        color: #dc3545 !important;
        padding: 0 5px;
    }
    
    #close-notifications:hover {
        color: #c82333 !important;
    }
    
    .notifications-header {
        background-color: #f8f9fa;
    }
    
    .dark-mode .notifications-header {
        background-color: #2d2d2d;
        border-bottom-color: #444 !important;
    }
    
</style>
<style>
    /* Ø£Ù†Ù…Ø§Ø· Ø²Ø± Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡ ÙˆØ§Ù„Ù‚Ø§Ø¦Ù…Ø© */
    .create-post-container {
        position: relative;
        display: flex;
        justify-content: center;
    }
    
    .create-post-btn {
        position: relative;
        bottom: 25px;
        background: linear-gradient(135deg, #0095f6, #0064e0);
        color: white;
        width: 50px;
        height: 50px;
        border-radius: 50%;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 20px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        border: none;
        z-index: 1001;
        transition: all 0.3s ease;
    }
    
    .create-post-btn:hover {
        transform: scale(1.1);
        box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3);
    }
    
    .create-options {
        position: absolute;
        bottom: 70px;
        right: 50%;
        transform: translateX(50%);
        background-color: white;
        border-radius: 12px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
        padding: 10px 0;
        min-width: 160px;
        z-index: 1000;
        animation: fadeIn 0.2s ease-out;
    }
    
    .create-option {
        display: flex;
        align-items: center;
        padding: 10px 15px;
        color: #333;
        text-decoration: none;
        transition: all 0.2s;
    }
    
    .create-option:hover {
        background-color: #f8f9fa;
        color: #0064e0;
    }
    
    .create-option i {
        width: 20px;
        text-align: center;
    }
    
    @keyframes fadeIn {
        from { opacity: 0; transform: translateX(50%) translateY(10px); }
        to { opacity: 1; transform: translateX(50%) translateY(0); }
    }
    
    /* Ø£Ù†Ù…Ø§Ø· Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø¸Ù„Ù… */
    .dark-mode .create-options {
        background-color: #2d2d2d;
        border: 1px solid #444;
    }
    
    .dark-mode .create-option {
        color: #e0e0e0;
    }
    
    .dark-mode .create-option:hover {
        background-color: #3d3d3d;
        color: #0084ff;
    }
    
    /* ØªØ¹Ø¯ÙŠÙ„Ø§Øª Ù„Ù„Ù‡ÙˆØ§ØªÙ */
    @media (max-width: 700px) {
        .create-options {
            bottom: 60px;
            min-width: 140px;
        }
        
        .create-option {
            padding: 8px 12px;
            font-size: 14px;
        }
    }
</style>

</head>
<body>
   
    <!-- ÙÙŠ Ù‚Ø³Ù… Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ÙÙŠ home.html -->
    <!-- ÙÙŠ Ù‚Ø³Ù… Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ÙÙŠ home.html -->
<div id="settings-modal" class="modal-overlay">
    <div class="modal-content">
        <!-- Ø±Ø£Ø³ Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…Ø¹ Ø²Ø± Ø§Ù„Ø¥ØºÙ„Ø§Ù‚ -->
        <div class="modal-header d-flex justify-content-between align-items-center border-bottom pb-2 mb-3">
            <h2 class="mb-0">Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</h2>
            <button class="close-btn btn-close" aria-label="Ø¥ØºÙ„Ø§Ù‚"></button>
        </div>
        
        <div class="modal-body">
            <!-- Ù‚Ø³Ù… ØªØºÙŠÙŠØ± Ø§Ù„Ø§Ø³Ù… -->
            <div class="settings-section mb-4">
                <h4 class="section-title">ØªØºÙŠÙŠØ± Ø§Ù„Ø§Ø³Ù…</h4>
                <form id="change-username-form" class="mt-3">
                    {% csrf_token %}
                    <div class="form-group mb-3">
                        <input type="text" class="form-control" id="new-username" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯" required>
                    </div>
                    <button type="submit" class="settings-btn w-100">
                        <i class="fas fa-user-edit me-2"></i> Ø­ÙØ¸ Ø§Ù„Ø§Ø³Ù…
                    </button>
                </form>
            </div>
            
            <!-- Ù‚Ø³Ù… ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± -->
            <div class="settings-section mb-4">
                <h4 class="section-title">Ø¨Ø¯Ù„ Ø§Ù„Ù…ÙˆØªØ¨Ø§Ø³</h4>
                <form id="change-password-form" class="mt-3">
                    {% csrf_token %}
                    <div class="form-group mb-3">
                        <input type="password" class="form-control" id="current-password" placeholder="Ø§Ù„Ù…ÙˆØªØ¨Ø§Ø³ Ø§Ù„Ø­Ø§Ù„ÙŠ" required>
                    </div>
                    <div class="form-group mb-3">
                        <input type="password" class="form-control" id="new-password" placeholder="Ø§Ù„Ù…ÙˆØªØ¨Ø§Ø³ Ø§Ù„Ø¬Ø¯ÙŠØ¯" required>
                    </div>
                    <div class="form-group mb-3">
                        <input type="password" class="form-control" id="confirm-password" placeholder="ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ù…ÙˆØªØ¨Ø§Ø³ Ø§Ù„Ø¬Ø¯ÙŠØ¯" required>
                    </div>
                    <button type="submit" class="settings-btn w-100">
                        <i class="fas fa-key me-2"></i> Ø¨Ø¯Ù„ Ø§Ù„Ù…ÙˆØªØ¨Ø§Ø³ 
                    </button>
                </form>
            </div>
            <script>
                document.addEventListener("DOMContentLoaded", function() {
                    const createBtn = document.getElementById("create-btn");
                    const createOptions = document.getElementById("create-options");
                    
                    // ÙØªØ­/Ø¥ØºÙ„Ø§Ù‚ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª
                    createBtn.addEventListener("click", function(e) {
                        e.stopPropagation();
                        createOptions.classList.toggle("d-none");
                    });
                    
                    // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬Ù‡Ø§
                    document.addEventListener("click", function() {
                        if (!createOptions.classList.contains("d-none")) {
                            createOptions.classList.add("d-none");
                        }
                    });
                    
                    // Ù…Ù†Ø¹ Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„ÙŠÙ‡Ø§
                    createOptions.addEventListener("click", function(e) {
                        e.stopPropagation();
                    });
                });
            </script>
            <!-- Ù‚Ø³Ù… ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø¸Ù„Ù… -->
            <div class="settings-section mb-4">
                <h4 class="section-title">ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹</h4>
                <div class="toggle-container d-flex justify-content-center align-items-center mt-3">
                    <span class="me-2"><i class="fas fa-sun"></i></span>
                    <div class="toggle-switch" id="dark-mode-toggle"></div>
                    <span class="ms-2"><i class="fas fa-moon"></i></span>
                </div>
            </div>

            <!-- Ù‚Ø³Ù… Ø­Ø°Ù Ø§Ù„Ø­Ø³Ø§Ø¨ -->
            <div class="settings-section">
                <h4 class="section-title">Ø­Ø°Ù Ø§Ù„Ø­Ø³Ø§Ø¨</h4>
                <p class="text-danger mb-3"><i class="fas fa-exclamation-triangle me-2"></i>Ø­Ø±Ø² Ø±ÙˆØ­Ùƒ: Ù‡Ø§Ø°Ø§ Ø§Ø¬Ø±Ø§Ø¡ Ù…Ø§ ØªÙ‚Ø¯Ø±Ø´ ØªØªØ±Ø§Ø¬Ø¹ Ø¹Ù„ÙŠÙ‡!</p>
                <form id="delete-account-form" class="mt-3">
                    {% csrf_token %}
                    <div class="form-group mb-3">
                        <input type="password" class="form-control" id="delete-password" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù„ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø°Ù" required>
                    </div>
                    <button type="submit" class="settings-btn btn-danger w-100">
                        <i class="fas fa-trash-alt me-2"></i> Ù…Ø­ÙŠ Ø§Ù„ÙƒÙˆÙ†Øª Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹
                    </button>
                </form>
            </div>
        </div>
    </div>
</div>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        // ÙØªØ­ ÙˆØ¥ØºÙ„Ø§Ù‚ Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
        document.getElementById("settings-btn").addEventListener("click", function() {
            document.getElementById("settings-modal").style.display = "flex";
            document.body.style.overflow = "hidden";
        });
    
        document.querySelector(".close-btn").addEventListener("click", function() {
            document.getElementById("settings-modal").style.display = "none";
            document.body.style.overflow = "";
        });
    
        // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬Ù‡Ø§
        document.getElementById("settings-modal").addEventListener("click", function(e) {
            if (e.target === this) {
                this.style.display = "none";
                document.body.style.overflow = "";
            }
        });
    
        // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± Escape
        document.addEventListener("keydown", function(e) {
            if (e.key === "Escape") {
                document.getElementById("settings-modal").style.display = "none";
                document.body.style.overflow = "";
            }
        });
    });
    </script>
<script>
// Ø­Ø°Ù Ø§Ù„Ø­Ø³Ø§Ø¨
document.getElementById("delete-account-form").addEventListener("submit", function(e) {
    e.preventDefault();
    const password = document.getElementById("delete-password").value;
    
    if (!confirm("Ø®ØµÙƒ ØªÙ…Ø­ÙŠ Ø§Ù„ÙƒÙˆÙ†Øª ØªØ§Ø¹Ùƒ ØŸ Ù‡Ø§Ø°Ø§ Ø§Ø¬Ø±Ø§Ø¡ Ù…Ø§ ØªÙ‚Ø¯Ø±Ø´ ØªØªØ±Ø§Ø¬Ø¹ Ø¹Ù„ÙŠÙ‡ !")) {
        return;
    }
    
    fetch("/delete_account/", {
        method: "POST",
        headers: {
            "X-CSRFToken": getCookie("csrftoken"),
            "Content-Type": "application/json"
        },
        body: JSON.stringify({ password: password })
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            alert("ØµØ§ÙŠ Ù…Ø­ÙŠÙ†Ø§ Ø§Ù„ÙƒÙˆÙ†Øª ØªØ§Ø¹Ùƒ . ØºØ§Ø¯ÙŠ Ù†Ø±Ø¬Ø¹ÙˆÙƒ Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©");
            window.location.href = data.redirect_url;
        } else {
            alert("Ø®Ø·Ø£: " + data.error);
        }
    })
    .catch(error => console.error("Error:", error));
});
</script>

    <!-- âœ… Ø§Ù„Ù†Ø§ÙØ¨Ø§Ø± -->
    <!-- Ø§Ù„Ù†Ø§ÙØ¨Ø§Ø± Ø§Ù„Ø¹Ù„ÙˆÙŠ Ø§Ù„Ù…Ø¹Ø¯Ù„ -->
<!-- Ø§Ù„Ù†Ø§ÙØ¨Ø§Ø± Ø§Ù„Ø¹Ù„ÙˆÙŠ Ø§Ù„Ù…Ø¹Ø¯Ù„ -->
<!-- Ø§Ù„Ù†Ø§ÙØ¨Ø§Ø± Ø§Ù„Ø¹Ù„ÙˆÙŠ Ø§Ù„Ù…Ø¹Ø¯Ù„ -->
<nav class="top-navbar">
    <!-- Ø§Ù„ØµÙ Ø§Ù„Ø£ÙˆÙ„: Ø§Ù„Ø´Ø¹Ø§Ø± ÙˆØµÙˆØ±Ø© Ø§Ù„Ø¨Ø±ÙˆÙÙŠÙ„ -->
    <div class="d-flex justify-content-between align-items-center w-100 mb-2">
        <!-- Ø§Ù„Ø´Ø¹Ø§Ø± ÙˆØ§Ø³Ù… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ -->
        <div class="d-flex align-items-center">
            <a class="navbar-brand" href="#">
                <img src="https://upload.wikimedia.org/wikipedia/commons/b/ba/Aiter.jpg" alt="Aite Logo" width="40" height="40" style="border-radius: 50%;">  
            </a>
            <div class="text-center ms-2">
                <strong class="app-name">Aite</strong>
            </div>
        </div>
        
        <!-- Ø²Ø± Ø§Ù„Ø®Ø±ÙˆØ¬ ÙˆØµÙˆØ±Ø© Ø§Ù„Ø¨Ø±ÙˆÙÙŠÙ„ -->
        <div class="d-flex align-items-center">
            <a href="{% url 'logout' %}" class="btn btn-sm btn-outline-danger me-2">
                <i class="fas fa-sign-out-alt"></i>
            </a>
            <a href="{% url 'profile' request.user.username %}">
                <img src="{{ request.user.profile_picture.url }}" 
                     alt="Profile" 
                     width="40" 
                     height="40" 
                     style="border-radius: 50%; object-fit: cover;"
                     onerror="this.onerror=null; this.src='/media/profile_pics/default_profile.png';">
            </a>
        </div>
    </div>
    
    <!-- Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù†ÙŠ: Ø´Ø±ÙŠØ· Ø§Ù„Ø¨Ø­Ø« ÙˆØ²Ø± Ø§Ù„Ø±ÙŠÙ„Ø² -->
    <div class="d-flex align-items-center w-100" style="position: relative;">
        <input type="text" class="search-bar form-control me-2" placeholder="Ø­ÙˆØ³ Ø¹Ù„Ù‰ Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ÙˆÙ„Ø§ Ù…Ù†Ø´ÙˆØ±Ø§Øª..." id="search-input">
        <a href="{% url 'reels' %}" class="btn btn-outline-primary btn-sm" style="white-space: nowrap;">
            <i class="fas fa-film me-1"></i> Ø±ÙŠÙ„Ø²
        </a>
        <div class="search-results" id="search-results"></div>
    </div>
</nav>
<script>
// Ø¥Ø¶Ø§ÙØ©/Ø¥Ø²Ø§Ù„Ø© ÙƒÙ„Ø§Ø³ Ø¹Ù†Ø¯ Ø§Ù„ØªÙ…Ø±ÙŠØ±
window.addEventListener('scroll', function() {
    const topNavbar = document.querySelector('.top-navbar');
    if (window.scrollY > 10) {
        topNavbar.classList.add('scrolled');
    } else {
        topNavbar.classList.remove('scrolled');
    }
});
</script>

    <!-- Ø§Ù„Ù†Ø§ÙØ¨Ø§Ø± Ø§Ù„Ø³ÙÙ„ÙŠ -->
    <nav class="bottom-navbar">
        <a class="nav-link" href="{% url 'chat_list' request.user.username %}">
            <i class="fas fa-comments"></i>
            <span>Ø§Ù„Ù…ÙŠØ³Ø§Ø¬Ø§Øª</span>
        </a>
        <a class="nav-link position-relative" href="#" id="notifications-btn">
            <i class="fas fa-bell"></i>
            <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger" 
                  style="transform: translate(-30%, -30%); 
                         font-size: 10px; 
                         padding: 4px 6px;
                         min-width: 18px;
                         display: flex;
                         justify-content: center;
                         align-items: center;" 
                  id="notification-count">
                0
            </span>
            <span>Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</span>
        </a>
        
        <!-- Ø²Ø± Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø¹Ø¯Ù„ -->
    <div class="create-post-container position-relative">
        <button class="create-post-btn" id="create-btn">
            <i class="fas fa-plus"></i>
        </button>
        
        <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª -->
        <div class="create-options d-none" id="create-options">
            <a href="{% url 'post_create' %}" class="create-option">
                <i class="fas fa-edit me-2"></i> Ù…Ù†Ø´ÙˆØ± Ø¬Ø¯ÙŠØ¯
            </a>
            <a href="{% url 'create_reel' %}" class="create-option">
                <i class="fas fa-film me-2"></i> Ø±ÙŠÙ„ Ø¬Ø¯ÙŠØ¯
            </a>
        </div>
    </div>
        
        <a class="nav-link" href="#" id="family-btn">
            <i class="fas fa-users"></i>
            <span>Ø§Ù„Ø¹Ø§Ø¦Ù„Ø©</span>
        </a>
        <a class="nav-link" href="#" id="settings-btn">
            <i class="fas fa-cog"></i>
            <span>Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</span>
        </a>
    </nav>
            

<!-- Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª -->
<div class="notifications-container" id="notifications-container">
    <div class="notifications-header d-flex justify-content-between align-items-center p-2 border-bottom">
        <h6 class="mb-0">Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</h6>
        <div>
            <button class="btn btn-sm btn-link" id="mark-all-read">ØªØ¹ÙŠÙŠÙ† Ø§Ù„ÙƒÙ„ ÙƒÙ…Ù‚Ø±ÙˆØ¡</button>
            <button class="btn btn-sm btn-link text-danger" id="close-notifications">
                <i class="fas fa-times"></i> Ø¥ØºÙ„Ø§Ù‚
            </button>
        </div>
    </div>
    <div class="notifications-list" id="notifications-list">
        <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¡ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ù‡Ù†Ø§ Ø¹Ø¨Ø± JavaScript -->
    </div>
</div>
<script>
    // Ø¥ØºÙ„Ø§Ù‚ Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
    document.getElementById("close-notifications").addEventListener("click", function(e) {
        e.preventDefault();
        document.getElementById("notifications-container").style.display = "none";
    });
    
    // ÙŠÙ…ÙƒÙ†Ùƒ Ø£ÙŠØ¶Ø§Ù‹ Ø¥Ø¶Ø§ÙØ© Ù‡Ø°Ù‡ Ø§Ù„ÙˆØ¸ÙŠÙØ© Ù„Ù„Ø³Ù…Ø§Ø­ Ø¨Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø¨Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬Ù‡Ø§
    document.addEventListener("click", function(e) {
        const notificationsBtn = document.getElementById("notifications-btn");
        const notificationsContainer = document.getElementById("notifications-container");
        
        if (!notificationsBtn.contains(e.target) && 
            !notificationsContainer.contains(e.target) && 
            notificationsContainer.style.display === "block") {
            notificationsContainer.style.display = "none";
        }
    });
    </script>
             <!-- Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù„Ø«: Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª -->
        
<div class="container-fluid content-container px-0">
<!-- Ù‚Ø³Ù… Ø§Ù„Ù‚ØµØµ Ø§Ù„Ù…Ø¹Ø¯Ù„ -->
<div class="stories-container">
    <div class="stories-wrapper">
        <!-- Ù‚ØµØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ -->
        <div class="story-item add-story" onclick="openStoryCreator()">
            <div class="story-avatar">
                <img src="{{ request.user.profile_picture.url }}" 
                     alt="Profile" 
                     class="profile-pic"
                     onerror="this.onerror=null; this.src='/media/profile_pics/default_profile.png';">
                <div class="add-icon">+</div>
            </div>
            <div class="story-author">Ù‚ØµØ© Ø¬Ø¯ÙŠØ¯Ø©</div>
        </div>
        
        <!-- Ù‚ØµØµ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ø¢Ø®Ø±ÙŠÙ† -->
        {% for story in stories %}
            <div class="story-item" onclick="openStoryViewer({{ story.id }})">
                <div class="story-avatar">
                    <img src="{{ story.user.profile_picture.url }}" 
                         alt="Profile" 
                         class="profile-pic"
                         onerror="this.onerror=null; this.src='/media/profile_pics/default_profile.png';">
                </div>
                <div class="story-author">{{ story.user.username }}</div>
            </div>
        {% endfor %}
    </div>
</div>
<script>
    // ØªØ­Ø³ÙŠÙ† ØªØ­Ù…ÙŠÙ„ ØµÙˆØ± Ø§Ù„Ù‚ØµØµ
    document.addEventListener("DOMContentLoaded", function() {
        document.querySelectorAll(".story-avatar img").forEach(img => {
            img.loading = "lazy";
            img.onerror = function() {
                this.src = '/media/profile_pics/default_profile.png';
            };
        });
    });
    // Ø¥Ø¶Ø§ÙØ©/Ø¥Ø²Ø§Ù„Ø© ÙƒÙ„Ø§Ø³ Ø¹Ù†Ø¯ Ø§Ù„ØªÙ…Ø±ÙŠØ±
window.addEventListener('scroll', function() {
    const topNavbar = document.querySelector('.top-navbar');
    if (window.scrollY > 10) {
        topNavbar.classList.add('scrolled');
    } else {
        topNavbar.classList.remove('scrolled');
    }
});
</script>
    <!-- âœ… Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ØµÙØ­Ø© -->
 <!-- Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª -->
 <div class="row mx-0">
    <div class="col-12 px-0">
        {% for post in posts %}
            <div class="post">
                        <div class="post-header d-flex align-items-center">
                            <img src="{{ post.user.profile_picture.url }}" class="rounded-circle me-2 border" alt="User avatar" 
                            onerror="this.onerror=null; this.src='/media/profile_pics/default_profile.png';"
                            style="width: 50px; height: 50px; object-fit: cover;">
                            <div>
                                <h6 class="mb-0">
                                    <a href="{% url 'profile' post.user.username %}" class="text-decoration-none">
                                        {{ post.user.username }}
                                        {% if post.user.is_verified %}
                                            <span class="verified-badge" title="Ø­Ø³Ø§Ø¨ Ù…ÙˆØ«ÙˆÙ‚ (Ù„Ø¯ÙŠÙ‡ Ø£ÙƒØ«Ø± Ù…Ù† 10 Ù…ØªØ§Ø¨Ø¹ÙŠÙ†)">
                                                <i class="fas fa-check-circle"></i>
                                            </span>
                                        {% endif %}
                                    </a>
                                </h6>
                                <small class="text-muted">{{ post.created_at }}</small>
                                <a href="{% url 'chat' post.user.username %}" class="btn btn-sm btn-outline-secondary">
                                    <i class="fas fa-comments"></i> Ø¯Ø±Ø¯Ø´Ø©
                                </a>
                                
                            </div>
                            {% if post.user == request.user %}
                                <form method="POST" action="{% url 'delete_post' post.id %}" class="ms-auto">
                                    {% csrf_token %}
                                    <button type="submit" class="btn btn-sm btn-outline-danger" onclick="return confirm('Ø®ØµÙƒ ØªÙ…Ø­ÙŠ Ø§Ù„Ù…Ù†Ø´ÙˆØ±ØŸ');">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </form>
                            {% endif %}
                        </div>

                        <p class="post-content mt-2">{{ post.content }}</p>
                        
                        {% if post.image and post.image.url %}
    <div class="post-image-container">
        <img src="{{ post.image.url }}" alt="" class="img-fluid rounded">
    </div>
{% endif %}
{% if post.audio %}
    <div class="mt-3">
        <audio controls>
            <source src="{{ post.audio.url }}" type="audio/mp3">
            Ù…ØªØµÙØ­Ùƒ Ù„Ø§ ÙŠØ¯Ø¹Ù… ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª.
        </audio>
    </div>
{% endif %}
{% if post.video %}
<div class="mt-3 video-container">
    <video controls width="100%" poster="{{ post.video.url|replace:'upload/','upload/w_500,h_500,c_fill,q_auto,f_auto/' }}">
        <source src="{{ post.video.url }}" type="video/mp4">
        Ù…ØªØµÙØ­Ùƒ Ù„Ø§ ÙŠØ¯Ø¹Ù… ØªØ´ØºÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ.
    </video>
</div>
{% endif %}



                        <div class="post-actions d-flex justify-content-between align-items-center mt-3">
                            <!-- Ø²Ø± Ø§Ù„Ø¥Ø¹Ø¬Ø§Ø¨ ÙˆØ¹Ø¯Ø¯ Ø§Ù„Ø¥Ø¹Ø¬Ø§Ø¨Ø§Øª -->
                            <div class="like-section d-flex align-items-center">
                                {% if user in post.likers.all %}
                                    <div class="like" onclick="unlike_post(this)" data-post_id="{{post.id}}">
                                        <div class="svg-span">
                                            <svg width="1.1em" height="1.1em" viewBox="0 -1 16 16" class="bi bi-heart-fill" fill="#e0245e" xmlns="http://www.w3.org/2000/svg">
                                                <path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"/>
                                            </svg>
                                        </div>
                                        &nbsp;
                                        <div style="padding: 7px 0px;" class="likes_count">{{post.likers.count}}</div>
                                    </div>
                                {% else %}
                                    <div class="like" onclick="like_post(this)" data-post_id="{{post.id}}">
                                        <div class="svg-span">
                                            <svg class="liked" width="1.1em" height="1.1em" viewBox="0 -1 16 16" class="bi bi-heart" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                                <path fill-rule="evenodd" d="M8 2.748l-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01L8 2.748zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143c.06.055.119.112.176.171a3.12 3.12 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15z"/>
                                            </svg>
                                        </div>
                                        &nbsp;
                                        <div style="padding: 7px 0px;" class="likes_count">{{post.likers.count}}</div>
                                    </div>
                                {% endif %}
                            </div>
                        
                            <!-- Ø²Ø± Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª -->
                            <button class="btn btn-outline-secondary btn-sm comment-button" data-bs-toggle="collapse" data-bs-target="#comments-{{ post.id }}">
                                <i class="fas fa-comment"></i> Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª
                            </button>
                        </div>

                        <!-- âœ… Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª -->
                        <div class="collapse mt-3" id="comments-{{ post.id }}">
                            <h6>Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª:</h6>
                            <div class="comments-list">
                                {% for comment in post.comments.all %}
                                    <div class="comment">
                                        <strong>{{ comment.user.username }}</strong>: {{ comment.content }}
                                    </div>
                                {% empty %}
                                    <p>Ù„Ø§ ØªÙˆØ¬Ø¯ ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ø¨Ø¹Ø¯.</p>
                                {% endfor %}
                            </div>
                            <form method="POST" class="mt-2 add-comment-form" data-post-id="{{ post.id }}">
                                {% csrf_token %}
                                <div class="input-group">
                                    <input type="text" name="content" class="form-control comment-input" placeholder="Ø£Ø¶Ù ØªØ¹Ù„ÙŠÙ‚Ù‹Ø§..." required>
                                    <button type="submit" class="btn btn-primary">Ø¨Ø¹Ø«</button>
                                </div>
                            </form>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>
    <script>
        // ØªØ¹Ø¯ÙŠÙ„Ø§Øª JavaScript Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø£Ø¯Ø§Ø¡
        document.addEventListener("DOMContentLoaded", function() {
            // ØªØ­Ø³ÙŠÙ† ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ±
            document.querySelectorAll(".post-image-container img").forEach(img => {
                img.loading = "lazy";
                img.onerror = function() {
                    this.style.display = "none";
                };
            });
            
            // ØªØ­Ø³ÙŠÙ† ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª
            document.querySelectorAll("video").forEach(video => {
                video.preload = "metadata";
            });
        });
    </script>
    <script>
        function like_post(element) {
            const postId = element.getAttribute('data-post_id');
            fetch(`/post/${postId}/like/`, {
                method: 'POST',
                headers: {
                    'X-CSRFToken': getCookie('csrftoken'),
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({})
            })
            .then(response => response.json())
            .then(data => {
                if (data.liked) {
                    element.innerHTML = `
                        <div class="svg-span">
                            <svg width="1.1em" height="1.1em" viewBox="0 -1 16 16" class="bi bi-heart-fill" fill="#e0245e" xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"/>
                            </svg>
                        </div>
                        &nbsp;
                        <div style="padding: 7px 0px;" class="likes_count">${data.like_count}</div>
                    `;
                } else {
                    element.innerHTML = `
                        <div class="svg-span">
                            <svg class="liked" width="1.1em" height="1.1em" viewBox="0 -1 16 16" class="bi bi-heart" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" d="M8 2.748l-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01L8 2.748zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143c.06.055.119.112.176.171a3.12 3.12 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15z"/>
                            </svg>
                        </div>
                        &nbsp;
                        <div style="padding: 7px 0px;" class="likes_count">${data.like_count}</div>
                    `;
                }
            })
            .catch(error => console.error('Error:', error));
        }
    
        function unlike_post(element) {
            const postId = element.getAttribute('data-post_id');
            fetch(`/post/${postId}/unlike/`, {
                method: 'POST',
                headers: {
                    'X-CSRFToken': getCookie('csrftoken'),
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({})
            })
            .then(response => response.json())
            .then(data => {
                if (!data.liked) {
                    element.innerHTML = `
                        <div class="svg-span">
                            <svg class="liked" width="1.1em" height="1.1em" viewBox="0 -1 16 16" class="bi bi-heart" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" d="M8 2.748l-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01L8 2.748zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143c.06.055.119.112.176.171a3.12 3.12 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15z"/>
                            </svg>
                        </div>
                        &nbsp;
                        <div style="padding: 7px 0px;" class="likes_count">${data.like_count}</div>
                    `;
                } else {
                    element.innerHTML = `
                        <div class="svg-span">
                            <svg width="1.1em" height="1.1em" viewBox="0 -1 16 16" class="bi bi-heart-fill" fill="#e0245e" xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"/>
                            </svg>
                        </div>
                        &nbsp;
                        <div style="padding: 7px 0px;" class="likes_count">${data.like_count}</div>
                    `;
                }
            })
            .catch(error => console.error('Error:', error));
        }
    
        function getCookie(name) {
            let cookieValue = null;
            if (document.cookie && document.cookie !== '') {
                const cookies = document.cookie.split(';');
                for (let i = 0; i < cookies.length; i++) {
                    const cookie = cookies[i].trim();
                    if (cookie.startsWith(name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            return cookieValue;
        }
        
    document.addEventListener("DOMContentLoaded", function() {
        document.querySelectorAll(".add-comment-form").forEach(form => {
            form.addEventListener("submit", function(event) {
                event.preventDefault();
                
                const postId = this.getAttribute("data-post-id");
                const commentInput = this.querySelector(".comment-input");
                const commentContent = commentInput.value;
                const commentsList = this.closest(".collapse").querySelector(".comments-list");

                if (!commentContent.trim()) {
                    alert("ÙŠØ±Ø¬Ù‰ ÙƒØªØ§Ø¨Ø© ØªØ¹Ù„ÙŠÙ‚ Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„.");
                    return;
                }

                fetch(`/post/${postId}/comment/`, {
                    method: "POST",
                    headers: {
                        "X-CSRFToken": getCookie("csrftoken"),
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({ content: commentContent })
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        const newComment = document.createElement("div");
                        newComment.classList.add("comment");
                        newComment.innerHTML = `<strong>${data.username}</strong>: ${data.content}`;
                        commentsList.appendChild(newComment);
                        commentInput.value = "";
                    } else {
                        alert("Ø­Ø¯Ø« Ø®Ø·Ø£: " + data.error);
                    }
                })
                .catch(error => console.error("Error:", error));
            });
        });
    });

    function getCookie(name) {
        let cookieValue = null;
        if (document.cookie && document.cookie !== "") {
            const cookies = document.cookie.split(";");
            for (let i = 0; i < cookies.length; i++) {
                const cookie = cookies[i].trim();
                if (cookie.startsWith(name + "=")) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }

    document.getElementById("search-input").addEventListener("input", function() {
    let query = this.value.trim();
    let resultsContainer = document.getElementById("search-results");

    if (query.length > 0) {
        fetch(`/search/?q=${query}`)
        .then(response => response.json())
        .then(data => {
            resultsContainer.innerHTML = "";
            resultsContainer.style.display = "block";

            if (data.users.length === 0 && data.posts.length === 0) {
                resultsContainer.innerHTML = "<div class='result-item text-center py-3'>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬</div>";
            } else {
                data.users.forEach(user => {
                    let userItem = document.createElement("div");
                    userItem.classList.add("result-item");
                    userItem.innerHTML = `
                        <i class='fas fa-user me-2'></i> 
                        <strong>${user.username}</strong>
                        <div class="text-muted small">Ù…Ø³ØªØ®Ø¯Ù…</div>
                    `;
                    userItem.onclick = () => window.location.href = `/profile/${user.username}/`;
                    resultsContainer.appendChild(userItem);
                });

                data.posts.forEach(post => {
                    let postItem = document.createElement("div");
                    postItem.classList.add("result-item");
                    postItem.innerHTML = `
                        <i class='fas fa-file-alt me-2'></i> 
                        <strong>${post.content.substring(0, 50)}${post.content.length > 50 ? '...' : ''}</strong>
                        <div class="text-muted small">Ù…Ù†Ø´ÙˆØ±</div>
                    `;
                    postItem.onclick = () => window.location.href = `/post/${post.id}/`;
                    resultsContainer.appendChild(postItem);
                });
            }
        })
        .catch(error => console.error("Error fetching search results:", error));
    } else {
        resultsContainer.style.display = "none";
    }
});
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
   <div id="floating-flower">
    <img src="https://png.pngtree.com/png-clipart/20190630/original/pngtree-vector-flower-icon-png-image_4147096.jpg" alt="Ø²Ù‡Ø±Ø©" />
</div>
<div id="popup-text"></div>

<script>
      document.addEventListener("DOMContentLoaded", function () {
        let flower = document.getElementById("floating-flower");
        let popup = document.getElementById("popup-text");
        let isDragging = false, offsetX = 0, offsetY = 0;

        // Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ø°ÙƒØ§Ø±
       let adhkar = [
    "Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡ ÙˆØ¨Ø­Ù…Ø¯Ù‡",
    "Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡ Ø§Ù„Ø¹Ø¸ÙŠÙ…",
    "Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø§Ù„Ù„Ù‡",
    "Ø§Ù„Ø­Ù…Ø¯ Ù„Ù„Ù‡",
    "Ø§Ù„Ù„Ù‡ Ø£ÙƒØ¨Ø±",
    "Ù„Ø§ Ø­ÙˆÙ„ ÙˆÙ„Ø§ Ù‚ÙˆØ© Ø¥Ù„Ø§ Ø¨Ø§Ù„Ù„Ù‡",
    "Ø£Ø³ØªØºÙØ± Ø§Ù„Ù„Ù‡",
    "Ø§Ù„Ù„Ù‡Ù… ØµÙ„Ù‘Ù ÙˆØ³Ù„Ù… Ø¹Ù„Ù‰ Ù†Ø¨ÙŠÙ†Ø§ Ù…Ø­Ù…Ø¯",
    "Ø§Ù„Ù„Ù‡Ù… Ù„Ùƒ Ø§Ù„Ø­Ù…Ø¯ ÙƒÙ…Ø§ ÙŠÙ†Ø¨ØºÙŠ Ù„Ø¬Ù„Ø§Ù„ ÙˆØ¬Ù‡Ùƒ ÙˆØ¹Ø¸ÙŠÙ… Ø³Ù„Ø·Ø§Ù†Ùƒ",
    "Ø§Ù„Ù„Ù‡Ù… Ø§ØºÙØ± Ù„ÙŠ ÙˆÙ„ÙˆØ§Ù„Ø¯ÙŠ ÙˆÙ„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³Ù„Ù…ÙŠÙ†",
    "Ø±Ø¶ÙŠØª Ø¨Ø§Ù„Ù„Ù‡ Ø±Ø¨Ø§ØŒ ÙˆØ¨Ø§Ù„Ø¥Ø³Ù„Ø§Ù… Ø¯ÙŠÙ†Ø§ØŒ ÙˆØ¨Ù…Ø­Ù…Ø¯ ØµÙ„Ù‰ Ø§Ù„Ù„Ù‡ Ø¹Ù„ÙŠÙ‡ ÙˆØ³Ù„Ù… Ù†Ø¨ÙŠØ§",
    "Ø§Ù„Ù„Ù‡Ù… Ø¥Ù†ÙŠ Ø£Ø³Ø£Ù„Ùƒ Ø§Ù„Ø¹ÙÙˆ ÙˆØ§Ù„Ø¹Ø§ÙÙŠØ© ÙÙŠ Ø§Ù„Ø¯Ù†ÙŠØ§ ÙˆØ§Ù„Ø¢Ø®Ø±Ø©",
    "Ø§Ù„Ù„Ù‡Ù… Ø¥Ù†ÙŠ Ø£Ø¹ÙˆØ° Ø¨Ùƒ Ù…Ù† Ø§Ù„Ù‡Ù… ÙˆØ§Ù„Ø­Ø²Ù† ÙˆØ§Ù„Ø¹Ø¬Ø² ÙˆØ§Ù„ÙƒØ³Ù„ ÙˆØ§Ù„Ø¬Ø¨Ù† ÙˆØ§Ù„Ø¨Ø®Ù„ ÙˆØºÙ„Ø¨Ø© Ø§Ù„Ø¯ÙŠÙ† ÙˆÙ‚Ù‡Ø± Ø§Ù„Ø±Ø¬Ø§Ù„",
    "Ø§Ù„Ù„Ù‡Ù… Ø¥Ù†ÙŠ Ø£Ø¹ÙˆØ° Ø¨Ùƒ Ù…Ù† Ø²ÙˆØ§Ù„ Ù†Ø¹Ù…ØªÙƒ ÙˆØªØ­ÙˆÙ„ Ø¹Ø§ÙÙŠØªÙƒ ÙˆÙØ¬Ø§Ø¡Ø© Ù†Ù‚Ù…ØªÙƒ ÙˆØ¬Ù…ÙŠØ¹ Ø³Ø®Ø·Ùƒ",
    "Ø§Ù„Ù„Ù‡Ù… Ø¥Ù†ÙŠ Ø£Ø³Ø£Ù„Ùƒ Ø§Ù„Ø¬Ù†Ø© ÙˆØ£Ø¹ÙˆØ° Ø¨Ùƒ Ù…Ù† Ø§Ù„Ù†Ø§Ø±",
    "Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ø¹Ù„ Ø§Ù„Ù‚Ø±Ø¢Ù† Ø±Ø¨ÙŠØ¹ Ù‚Ù„Ø¨ÙŠ ÙˆÙ†ÙˆØ± ØµØ¯Ø±ÙŠ ÙˆØ¬Ù„Ø§Ø¡ Ø­Ø²Ù†ÙŠ ÙˆØ°Ù‡Ø§Ø¨ Ù‡Ù…ÙŠ",
    "Ø§Ù„Ù„Ù‡Ù… Ø§Ù‡Ø¯Ù†ÙŠ ÙˆØ³Ø¯Ø¯Ù†ÙŠ",
    "Ø§Ù„Ù„Ù‡Ù… Ø£ØµÙ„Ø­ Ù„ÙŠ Ø´Ø£Ù†ÙŠ ÙƒÙ„Ù‡ØŒ ÙˆÙ„Ø§ ØªÙƒÙ„Ù†ÙŠ Ø¥Ù„Ù‰ Ù†ÙØ³ÙŠ Ø·Ø±ÙØ© Ø¹ÙŠÙ†",
    "Ø§Ù„Ù„Ù‡Ù… Ø¥Ù†ÙŠ Ø£Ø¹ÙˆØ° Ø¨Ùƒ Ù…Ù† Ø§Ù„ÙƒÙØ± ÙˆØ§Ù„ÙÙ‚Ø± ÙˆØ¹Ø°Ø§Ø¨ Ø§Ù„Ù‚Ø¨Ø±",
    "Ø§Ù„Ù„Ù‡Ù… Ø¥Ù†ÙŠ Ø£Ø¹ÙˆØ° Ø¨Ùƒ Ù…Ù† Ø´Ø± Ù…Ø§ Ø¹Ù…Ù„Øª ÙˆÙ…Ù† Ø´Ø± Ù…Ø§ Ù„Ù… Ø£Ø¹Ù…Ù„",
    "Ø§Ù„Ù„Ù‡Ù… Ø£Ù†Øª Ø±Ø¨ÙŠ Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø£Ù†ØªØŒ Ø®Ù„Ù‚ØªÙ†ÙŠ ÙˆØ£Ù†Ø§ Ø¹Ø¨Ø¯ÙƒØŒ ÙˆØ£Ù†Ø§ Ø¹Ù„Ù‰ Ø¹Ù‡Ø¯Ùƒ ÙˆÙˆØ¹Ø¯Ùƒ Ù…Ø§ Ø§Ø³ØªØ·Ø¹Øª",
    "Ø§Ù„Ù„Ù‡Ù… Ø£Ø¹Ù†ÙŠ Ø¹Ù„Ù‰ Ø°ÙƒØ±Ùƒ ÙˆØ´ÙƒØ±Ùƒ ÙˆØ­Ø³Ù† Ø¹Ø¨Ø§Ø¯ØªÙƒ",
    "Ø§Ù„Ù„Ù‡Ù… Ø¥Ù†ÙŠ Ø£Ø³Ø£Ù„Ùƒ Ø¹Ù„Ù…Ø§ Ù†Ø§ÙØ¹Ø§ØŒ ÙˆØ±Ø²Ù‚Ø§ Ø·ÙŠØ¨Ø§ØŒ ÙˆØ¹Ù…Ù„Ø§ Ù…ØªÙ‚Ø¨Ù„Ø§",
    "Ø§Ù„Ù„Ù‡Ù… Ø«Ø¨Øª Ù‚Ù„Ø¨ÙŠ Ø¹Ù„Ù‰ Ø¯ÙŠÙ†Ùƒ",
    "ÙŠØ§ Ø­ÙŠ ÙŠØ§ Ù‚ÙŠÙˆÙ… Ø¨Ø±Ø­Ù…ØªÙƒ Ø£Ø³ØªØºÙŠØ«ØŒ Ø£ØµÙ„Ø­ Ù„ÙŠ Ø´Ø£Ù†ÙŠ ÙƒÙ„Ù‡ØŒ ÙˆÙ„Ø§ ØªÙƒÙ„Ù†ÙŠ Ø¥Ù„Ù‰ Ù†ÙØ³ÙŠ Ø·Ø±ÙØ© Ø¹ÙŠÙ†",
    "Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ø¹Ù„Ù†ÙŠ Ù…Ù† Ø§Ù„ØªÙˆØ§Ø¨ÙŠÙ† ÙˆØ§Ø¬Ø¹Ù„Ù†ÙŠ Ù…Ù† Ø§Ù„Ù…ØªØ·Ù‡Ø±ÙŠÙ†",
    "Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ø¹Ù„ Ù„ÙŠ Ù…Ù† ÙƒÙ„ Ù‡Ù… ÙØ±Ø¬Ø§ØŒ ÙˆÙ…Ù† ÙƒÙ„ Ø¶ÙŠÙ‚ Ù…Ø®Ø±Ø¬Ø§ØŒ ÙˆÙ…Ù† ÙƒÙ„ Ø¨Ù„Ø§Ø¡ Ø¹Ø§ÙÙŠØ©",
    "Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ø¹Ù„ Ø¢Ø®Ø± ÙƒÙ„Ø§Ù…ÙŠ Ù…Ù† Ø§Ù„Ø¯Ù†ÙŠØ§ Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø§Ù„Ù„Ù‡",
    "Ø§Ù„Ù„Ù‡Ù… Ø§Ø±Ø²Ù‚Ù†ÙŠ Ø­Ø³Ù† Ø§Ù„Ø®Ø§ØªÙ…Ø©",
    "Ø§Ù„Ù„Ù‡Ù… Ø¥Ù†ÙŠ Ø£Ø¹ÙˆØ° Ø¨Ùƒ Ù…Ù† ÙØªÙ†Ø© Ø§Ù„Ù…Ø­ÙŠØ§ ÙˆØ§Ù„Ù…Ù…Ø§Øª ÙˆÙØªÙ†Ø© Ø§Ù„Ù…Ø³ÙŠØ­ Ø§Ù„Ø¯Ø¬Ø§Ù„",
    "Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ø¹Ù„ Ù„ÙŠ Ù„Ø³Ø§Ù†Ø§ Ø°Ø§ÙƒØ±Ø§ ÙˆÙ‚Ù„Ø¨Ø§ Ø´Ø§ÙƒØ±Ø§ ÙˆØ¨Ø¯Ù†Ø§ ØµØ§Ø¨Ø±Ø§",
    "Ø§Ù„Ù„Ù‡Ù… Ø£Ù†Øª Ø§Ù„Ø³Ù„Ø§Ù… ÙˆÙ…Ù†Ùƒ Ø§Ù„Ø³Ù„Ø§Ù… ÙØ­ÙŠÙ†Ø§ Ø±Ø¨Ù†Ø§ Ø¨Ø§Ù„Ø³Ù„Ø§Ù…",
    "Ø§Ù„Ù„Ù‡Ù… Ø§ØºÙØ± Ù„Ù†Ø§ Ø®Ø·Ø§ÙŠØ§Ù†Ø§ ÙˆØ¬Ù‡Ù„Ù†Ø§ ÙˆØ¥Ø³Ø±Ø§ÙÙ†Ø§ ÙÙŠ Ø£Ù…Ø±Ù†Ø§",
    "Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ø¹Ù„Ù†ÙŠ Ù„Ùƒ Ø°ÙƒØ§Ø±Ø§ØŒ Ù„Ùƒ Ø´ÙƒØ§Ø±Ø§ØŒ Ù„Ùƒ Ù…Ø·ÙˆØ§Ø¹Ø§",
    "Ø§Ù„Ù„Ù‡Ù… Ø§ØºÙØ± Ù„ÙŠ Ù…Ø§ Ù‚Ø¯Ù…Øª ÙˆÙ…Ø§ Ø£Ø®Ø±Øª ÙˆÙ…Ø§ Ø£Ø³Ø±Ø±Øª ÙˆÙ…Ø§ Ø£Ø¹Ù„Ù†Øª ÙˆÙ…Ø§ Ø£Ù†Øª Ø£Ø¹Ù„Ù… Ø¨Ù‡ Ù…Ù†ÙŠ",
    "Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ø¹Ù„ Ø­Ø¨ÙŠ Ù„Ùƒ ÙÙˆÙ‚ Ø­Ø¨ÙŠ Ù„Ù†ÙØ³ÙŠ ÙˆØ£Ù‡Ù„ÙŠ ÙˆÙ…Ø§Ù„ÙŠ",
    "Ø§Ù„Ù„Ù‡Ù… Ø¥Ù†ÙŠ Ø£Ø³Ø£Ù„Ùƒ Ø­Ø³Ù† Ø§Ù„Ø®Ù„Ù‚ ÙˆØ§Ù„Ø¹ÙÙˆ ÙˆØ§Ù„Ø¹Ø§ÙÙŠØ© ÙÙŠ Ø§Ù„Ø¯Ù†ÙŠØ§ ÙˆØ§Ù„Ø¢Ø®Ø±Ø©",
    "Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ø¹Ù„Ù†Ø§ Ù…Ù…Ù† ØªÙ‚ÙˆÙ„ Ù„Ù‡Ù… Ø§Ù„Ø¬Ù†Ø©: \"Ø£Ù‚Ø¨Ù„ ÙÙ‚Ø¯ Ø§Ø´ØªÙ‚Øª Ø¥Ù„ÙŠÙƒ\"",
    "Ø§Ù„Ù„Ù‡Ù… Ø¥Ù†ÙŠ Ø£Ø¹ÙˆØ° Ø¨Ùƒ Ù…Ù† Ø§Ù„Ù‡Ù… ÙˆØ§Ù„Ø­Ø²Ù†ØŒ ÙˆØ£Ø¹ÙˆØ° Ø¨Ùƒ Ù…Ù† Ø§Ù„Ø¹Ø¬Ø² ÙˆØ§Ù„ÙƒØ³Ù„",
    "Ø§Ù„Ù„Ù‡Ù… Ø¥Ù†ÙŠ Ø£Ø¹ÙˆØ° Ø¨Ùƒ Ù…Ù† Ø¹Ù„Ù… Ù„Ø§ ÙŠÙ†ÙØ¹ØŒ ÙˆÙ…Ù† Ù‚Ù„Ø¨ Ù„Ø§ ÙŠØ®Ø´Ø¹ØŒ ÙˆÙ…Ù† Ø¯Ø¹Ø§Ø¡ Ù„Ø§ ÙŠÙØ³Ù…Ø¹",
    "Ø§Ù„Ù„Ù‡Ù… Ø£Ø¹Ù†Ø§ Ø¹Ù„Ù‰ ØµÙŠØ§Ù… Ø±Ù…Ø¶Ø§Ù† ÙˆÙ‚ÙŠØ§Ù…Ù‡ Ø¥ÙŠÙ…Ø§Ù†Ù‹Ø§ ÙˆØ§Ø­ØªØ³Ø§Ø¨Ù‹Ø§",
    "Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ø¹Ù„Ù†Ø§ Ù…Ù† Ø£Ù‡Ù„ Ø§Ù„Ø¬Ù†Ø©ØŒ ÙˆØ§Ø±Ø²Ù‚Ù†Ø§ Ø§Ù„ÙØ±Ø¯ÙˆØ³ Ø§Ù„Ø£Ø¹Ù„Ù‰ Ø¨ØºÙŠØ± Ø­Ø³Ø§Ø¨",
    "Ø§Ù„Ù„Ù‡Ù… Ù„Ø§ ØªØ¬Ø¹Ù„ Ø§Ù„Ø¯Ù†ÙŠØ§ Ø£ÙƒØ¨Ø± Ù‡Ù…Ù†Ø§ØŒ ÙˆÙ„Ø§ Ù…Ø¨Ù„Øº Ø¹Ù„Ù…Ù†Ø§ØŒ ÙˆÙ„Ø§ Ø¥Ù„Ù‰ Ø§Ù„Ù†Ø§Ø± Ù…ØµÙŠØ±Ù†Ø§",
    "Ø§Ù„Ù„Ù‡Ù… Ø¥Ù†ÙŠ Ø£Ø³Ø£Ù„Ùƒ Ø±Ø¶Ø§Ùƒ ÙˆØ§Ù„Ø¬Ù†Ø© ÙˆØ£Ø¹ÙˆØ° Ø¨Ùƒ Ù…Ù† Ø³Ø®Ø·Ùƒ ÙˆØ§Ù„Ù†Ø§Ø±",
    "Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ø¹Ù„ Ø®ÙŠØ± Ø£ÙŠØ§Ù…ÙŠ ÙŠÙˆÙ… Ø£Ù„Ù‚Ø§Ùƒ",
    "Ø§Ù„Ù„Ù‡Ù… Ø¥Ù†ÙŠ Ø£Ø¹ÙˆØ° Ø¨Ùƒ Ù…Ù† Ø³ÙˆØ¡ Ø§Ù„Ø®Ø§ØªÙ…Ø©",
    "Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ø¹Ù„ Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ… Ù†ÙˆØ±Ù‹Ø§ Ù„ØµØ¯Ø±ÙŠ ÙˆØ±Ø¨ÙŠØ¹Ù‹Ø§ Ù„Ù‚Ù„Ø¨ÙŠ ÙˆØ¬Ù„Ø§Ø¡Ù‹ Ù„Ø­Ø²Ù†ÙŠ",
    "Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ø¹Ù„Ù†Ø§ Ù…Ù† Ø§Ù„Ù…ØªÙ‚ÙŠÙ†ØŒ ÙˆØ§Ø¬Ø¹Ù„Ù†Ø§ Ù…Ù† ÙˆØ±Ø«Ø© Ø¬Ù†Ø© Ø§Ù„Ù†Ø¹ÙŠÙ…",
    "Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ø¹Ù„Ù†Ø§ Ù…Ù† Ø§Ù„Ø°ÙŠÙ† Ù„Ø§ Ø®ÙˆÙ Ø¹Ù„ÙŠÙ‡Ù… ÙˆÙ„Ø§ Ù‡Ù… ÙŠØ­Ø²Ù†ÙˆÙ†",
    "Ø§Ù„Ù„Ù‡Ù… Ø¥Ù†ÙŠ Ø£Ø³Ø£Ù„Ùƒ Ø¨Ø§Ø³Ù…Ùƒ Ø§Ù„Ø£Ø¹Ø¸Ù… Ø§Ù„Ø°ÙŠ Ø¥Ø°Ø§ Ø¯Ø¹ÙŠØª Ø¨Ù‡ Ø£Ø¬Ø¨ØªØŒ ÙˆØ¥Ø°Ø§ Ø³Ø¦Ù„Øª Ø¨Ù‡ Ø£Ø¹Ø·ÙŠØª",
    "Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ø¹Ù„Ù†ÙŠ Ù…Ø¨Ø§Ø±ÙƒÙ‹Ø§ Ø£ÙŠÙ†Ù…Ø§ ÙƒÙ†Øª",
    "Ø§Ù„Ù„Ù‡Ù… Ø§Ø³ØªØ± Ø¹ÙˆØ±ØªÙŠØŒ ÙˆØ¢Ù…Ù† Ø±ÙˆØ¹ØªÙŠØŒ ÙˆØ§Ø­ÙØ¸Ù†ÙŠ Ù…Ù† Ø¨ÙŠÙ† ÙŠØ¯ÙŠ ÙˆÙ…Ù† Ø®Ù„ÙÙŠ"
];
 // ğŸ† Ø¬Ø¹Ù„ Ø§Ù„Ø²Ù‡Ø±Ø© Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ø³Ø­Ø¨
 flower.addEventListener("mousedown", function (e) {
            isDragging = true;
            offsetX = e.clientX - flower.getBoundingClientRect().left;
            offsetY = e.clientY - flower.getBoundingClientRect().top;
            flower.style.cursor = "grabbing";
        });

        document.addEventListener("mousemove", function (e) {
            if (isDragging) {
                let x = e.clientX - offsetX;
                let y = e.clientY - offsetY;

                // ğŸ”¹ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø­Ø¯ÙˆØ¯ Ø¯Ø§Ø®Ù„ Ø§Ù„Ù†Ø§ÙØ°Ø©
                let maxX = window.innerWidth - flower.offsetWidth;
                let maxY = window.innerHeight - flower.offsetHeight;

                flower.style.left = Math.max(0, Math.min(x, maxX)) + "px";
                flower.style.top = Math.max(0, Math.min(y, maxY)) + "px";
            }
        });

        document.addEventListener("mouseup", function () {
            isDragging = false;
            flower.style.cursor = "grab";
        });


function moveFlower() {
            let x = Math.random() * (window.innerWidth - 100);
            let y = Math.random() * (window.innerHeight - 100);
            flower.style.left = `${x}px`;
            flower.style.top = `${y}px`;
        }

        // ØªØ­Ø±ÙŠÙƒ Ø§Ù„Ø²Ù‡Ø±Ø© Ø¨Ø³Ù„Ø§Ø³Ø© ÙƒÙ„ 4 Ø«ÙˆØ§Ù†Ù
        setInterval(moveFlower, 4000);
        moveFlower();

        flower.addEventListener("click", function () {
    let randomDhikr = adhkar[Math.floor(Math.random() * adhkar.length)];
    popup.innerText = randomDhikr;
    popup.style.display = "block";

    setTimeout(function () {
        popup.style.display = "none";
    }, 5000);  // Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ù…Ø¯Ø© Ø¥Ù„Ù‰ 6 Ø«ÙˆØ§Ù†Ù
});

    });
</script>
<script>
    document.getElementById("settings-btn").addEventListener("click", function () {
        document.getElementById("settings-modal").style.display = "flex";
    });

    document.querySelector(".close-btn").addEventListener("click", function () {
        document.getElementById("settings-modal").style.display = "none";
    });

    window.addEventListener("click", function (event) {
        let modal = document.getElementById("settings-modal");
        if (event.target === modal) {
            modal.style.display = "none";
        }
    });
</script>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        document.getElementById("settings-btn").addEventListener("click", function () {
            document.getElementById("settings-modal").style.display = "flex";
        });

        document.querySelector(".close-btn").addEventListener("click", function () {
            document.getElementById("settings-modal").style.display = "none";
        });

        window.addEventListener("click", function (event) {
            let modal = document.getElementById("settings-modal");
            if (event.target === modal) {
                modal.style.display = "none";
            }
        });

        // âœ… Ø§Ù„ØªÙ†Ù‚Ù„ Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø²Ø±Ø§Ø±
        document.getElementById("profile-btn").addEventListener("click", function () {
            window.location.href = "{% url 'profile' request.user.username %}";
        });

        document.getElementById("change-password-btn").addEventListener("click", function () {
            window.location.href = "{% url 'custom_password_change' %}";
        });
    });
</script>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        document.querySelectorAll(".post-image-container img").forEach(img => {
            img.onerror = function() {
                this.parentElement.style.display = "none"; // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø¹Ù†ØµØ± Ø¥Ø°Ø§ Ù„Ù… ÙŠØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø©
            };
        });
    });
    </script>
    
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const darkModeToggle = document.getElementById("dark-mode-toggle");
            const body = document.body;
            
            if (localStorage.getItem("dark-mode") === "enabled") {
                body.classList.add("dark-mode");
            }
            
            darkModeToggle.addEventListener("click", function () {
                body.classList.toggle("dark-mode");
                localStorage.setItem("dark-mode", body.classList.contains("dark-mode") ? "enabled" : "disabled");
            });
        });

        
    </script>


<script>
// ÙØªØ­ Ù†Ø§ÙØ°Ø© Ø¥Ù†Ø´Ø§Ø¡ Ù‚ØµØ©
function openStoryCreator() {
    const input = document.createElement('input');
    input.type = 'file';
    input.accept = 'image/*';
    
    input.onchange = async (e) => {
        const file = e.target.files[0];
        if (!file) return;
        
        const formData = new FormData();
        formData.append('image', file);
        
        try {
            const response = await fetch('/story/add/', {
                method: 'POST',
                headers: {
                    'X-CSRFToken': getCookie('csrftoken')
                },
                body: formData
            });
            
            const data = await response.json();
            if (data.success) {
                location.reload();
            } else {
                alert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø±ÙØ¹ Ø§Ù„Ù‚ØµØ©');
            }
        } catch (error) {
            console.error('Error:', error);
            alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…');
        }
    };
    
    input.click();
}

// ÙØªØ­ Ù†Ø§ÙØ°Ø© Ø¹Ø±Ø¶ Ø§Ù„Ù‚ØµØ©
function openStoryViewer(storyId) {
    // Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù†ØµØ± Ø¹Ø±Ø¶ Ø§Ù„Ù‚ØµØ©
    const storyViewer = document.createElement('div');
    storyViewer.id = 'story-viewer';
    storyViewer.innerHTML = `
        <div class="story-modal">
            <div class="story-header">
                <img src="" id="story-user-avatar" class="rounded-circle">
                <span id="story-username"></span>
                <span class="story-time"></span>
                <button class="close-story">&times;</button>
            </div>
            <div class="story-content">
                <img src="" id="story-image" class="img-fluid">
            </div>
            <div class="story-progress">
                <div class="progress-bar"></div>
            </div>
        </div>
    `;
    
    document.body.appendChild(storyViewer);
    
    // Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‚ØµØ©
    fetch(`/story/${storyId}/json/`)
        .then(response => response.json())
        .then(data => {
            document.getElementById('story-user-avatar').src = data.user.profile_picture;
            document.getElementById('story-username').textContent = data.user.username;
            document.getElementById('story-image').src = data.image;
            document.querySelector('.story-time').textContent = data.time_ago;
            
            // Ø¨Ø¯Ø¡ Ù…Ø¤Ù‚Øª Ø§Ù„Ù‚ØµØ©
            startStoryTimer();
        });
    
    // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù‚ØµØ©
    document.querySelector('.close-story').addEventListener('click', () => {
        document.body.removeChild(storyViewer);
    });
}

function startStoryTimer() {
    const progressBar = document.querySelector('.progress-bar');
    let width = 0;
    const interval = setInterval(() => {
        if (width >= 100) {
            clearInterval(interval);
            const viewer = document.getElementById('story-viewer');
            if (viewer) {
                document.body.removeChild(viewer);
            }
        } else {
            width += 1;
            progressBar.style.width = width + '%';
        }
    }, 1000); // 5 Ø«ÙˆØ§Ù†ÙŠ Ù„ÙƒÙ„ Ù‚ØµØ©
}

    </script>
    <script>
// ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ÙƒÙ„ 10 Ø«ÙˆØ§Ù†ÙŠ
function updateNotifications() {
    fetch("/notifications/")
        .then(response => response.json())
        .then(data => {
            const list = document.getElementById("notifications-list");
            const countElement = document.getElementById("notification-count");

            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø¯Ø§Ø¯
            countElement.textContent = data.unread_count > 0 ? data.unread_count : "0";

            // ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
            list.innerHTML = "";

            if (data.notifications.length === 0) {
                list.innerHTML = "<div class='text-center p-3'>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø¬Ø¯ÙŠØ¯Ø©</div>";
                return;
            }

            data.notifications.forEach(notification => {
                const notificationItem = document.createElement("a");
                notificationItem.className = `notification-item ${notification.is_read ? "" : "unread"}`;
                notificationItem.href = notification.type === 'message' ? "/chat/" + notification.sender : "/post/" + notification.post_id;
                notificationItem.innerHTML = `
                    <div class="notification-content">
                        <img src="${notification.sender_profile_picture}" alt="${notification.sender}" 
                             onerror="this.src='{% static 'default_profile.png' %}'">
                        <div>
                            <div>${notification.message}</div>
                            ${notification.content ? `<div class="notification-preview">${notification.content}</div>` : ''}
                            <div class="notification-time">${notification.created_at}</div>
                        </div>
                    </div>
                `;
                list.appendChild(notificationItem);
            });
        });
}

// ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© ÙˆØªØ¹ÙŠÙŠÙ†Ù‡Ø§ ÙƒÙ…Ù‚Ø±ÙˆØ¡Ø©
document.getElementById("notifications-btn").addEventListener("click", function(e) {
    e.preventDefault();
    const container = document.getElementById("notifications-container");
    container.style.display = container.style.display === "block" ? "none" : "block";

    // Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ÙƒÙ…Ù‚Ø±ÙˆØ¡Ø© Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
    fetch("/notifications/mark_all_read/", {
        method: "POST",
        headers: {
            "X-CSRFToken": getCookie("csrftoken")
        }
    }).then(() => {
        updateNotifications(); // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø¨Ø¹Ø¯ ØªØ¹ÙŠÙŠÙ†Ù‡Ø§ ÙƒÙ…Ù‚Ø±ÙˆØ¡Ø©
    });
});

// ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ÙƒÙ„ 10 Ø«ÙˆØ§Ù†ÙŠ
setInterval(updateNotifications, 10000);

// ØªØ¹ÙŠÙŠÙ† Ø§Ù„ÙƒÙ„ ÙƒÙ…Ù‚Ø±ÙˆØ¡ (Ø²Ø± Ø¥Ø¶Ø§ÙÙŠ)
document.getElementById("mark-all-read").addEventListener("click", function(e) {
    e.preventDefault();
    fetch("/notifications/mark_all_read/", {
        method: "POST",
        headers: {
            "X-CSRFToken": getCookie("csrftoken")
        }
    }).then(() => {
        updateNotifications();
    });
});

// ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
document.addEventListener("DOMContentLoaded", function() {
    updateNotifications();
});
</script>
<script>
    // ØªØºÙŠÙŠØ± Ø§Ù„Ø§Ø³Ù…
    document.getElementById("change-username-form").addEventListener("submit", function(e) {
        e.preventDefault();
        const newUsername = document.getElementById("new-username").value.trim();
        
        if (newUsername.length < 3) {
            alert("ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯ 3 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„");
            return;
        }
        
        fetch("/change_username/", {
            method: "POST",
            headers: {
                "X-CSRFToken": getCookie("csrftoken"),
                "Content-Type": "application/json"
            },
            body: JSON.stringify({ new_username: newUsername })
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                alert("ØªÙ… ØªØºÙŠÙŠØ± Ø§Ù„Ø§Ø³Ù… Ø¨Ù†Ø¬Ø§Ø­!");
                window.location.reload();
            } else {
                alert("Ø®Ø·Ø£: " + data.error);
            }
        })
        .catch(error => console.error("Error:", error));
    });
    
    // ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
    document.getElementById("change-password-form").addEventListener("submit", function(e) {
        e.preventDefault();
        const currentPassword = document.getElementById("current-password").value;
        const newPassword = document.getElementById("new-password").value;
        const confirmPassword = document.getElementById("confirm-password").value;
        
        if (newPassword !== confirmPassword) {
            alert("ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ØºÙŠØ± Ù…ØªØ·Ø§Ø¨Ù‚Ø©");
            return;
        }
        
        if (newPassword.length < 6) {
            alert("ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© 6 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„");
            return;
        }
        
        fetch("/change_password/", {
            method: "POST",
            headers: {
                "X-CSRFToken": getCookie("csrftoken"),
                "Content-Type": "application/json"
            },
            body: JSON.stringify({ 
                current_password: currentPassword,
                new_password: newPassword 
            })
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                alert("ØªÙ… ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø¨Ù†Ø¬Ø§Ø­!");
                document.getElementById("change-password-form").reset();
            } else {
                alert("Ø®Ø·Ø£: " + data.error);
            }
        })
        .catch(error => console.error("Error:", error));
    });
    </script>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            // Ø¶Ø¨Ø· Ø­Ø¬Ù… Ø§Ù„Ù†Ø§ÙØ°Ø© Ø­Ø³Ø¨ Ø­Ø¬Ù… Ø§Ù„Ø´Ø§Ø´Ø©
            function adjustModalSize() {
                const modal = document.getElementById("settings-modal");
                if (window.innerWidth <= 700) {
                    modal.querySelector(".modal-content").style.width = "90%";
                } else {
                    modal.querySelector(".modal-content").style.width = "300px";
                }
            }
            
            // Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø§Ù„Ø¯Ø§Ù„Ø© Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© ÙˆØ¹Ù†Ø¯ ØªØºÙŠÙŠØ± Ø­Ø¬Ù… Ø§Ù„Ù†Ø§ÙØ°Ø©
            adjustModalSize();
            window.addEventListener("resize", adjustModalSize);
        });
    </script>
<!-- Ù†Ø§ÙØ°Ø© Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© -->
<div id="message-popup" class="message-popup">
    <div class="message-popup-header">
        <span>Ø±Ø³Ø§Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø©</span>
        <button class="message-popup-close" onclick="closeMessagePopup()">&times;</button>
    </div>
    <div class="message-popup-body">
        <img id="message-popup-avatar" class="message-popup-avatar" src="" alt="ØµÙˆØ±Ø© Ø§Ù„Ù…Ø±Ø³Ù„">
        <div class="message-popup-content">
            <div id="message-popup-sender" class="message-popup-sender"></div>
            <div id="message-popup-text" class="message-popup-text"></div>
        </div>
    </div>
    <div class="message-popup-footer">
        <button class="message-popup-btn" onclick="openChatFromPopup()">ÙØªØ­ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©</button>
    </div>
</div>
<script>
    // Ù…ØªØºÙŠØ±Ø§Øª Ù„ØªØ®Ø²ÙŠÙ† Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø±Ø³Ø§Ù„Ø©
    let currentMessageSender = null;
    let currentMessageContent = null;
    let hasPopupShown = false; // Ù…ØªØºÙŠØ± Ù„ØªØªØ¨Ø¹ Ø¸Ù‡ÙˆØ± Ø§Ù„Ù†Ø§ÙØ°Ø©

    // Ø¹Ø±Ø¶ Ù†Ø§ÙØ°Ø© Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø©
    function showMessagePopup(senderUsername, senderAvatar, messageContent) {
        // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ù†Ø§ÙØ°Ø© Ù‚Ø¯ Ø¸Ù‡Ø±Øª Ù…Ù† Ù‚Ø¨Ù„ØŒ Ù„Ø§ ØªØ¹Ø±Ø¶Ù‡Ø§ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰
        if (hasPopupShown) return;
        
        currentMessageSender = senderUsername;
        currentMessageContent = messageContent;
        
        document.getElementById('message-popup-avatar').src = senderAvatar;
        document.getElementById('message-popup-sender').textContent = senderUsername;
        document.getElementById('message-popup-text').textContent = messageContent;
        
        const popup = document.getElementById('message-popup');
        popup.style.display = 'block';
        hasPopupShown = true; // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø§ÙØ°Ø©
        
        // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù†Ø§ÙØ°Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨Ø¹Ø¯ 5 Ø«ÙˆØ§Ù†ÙŠ
        setTimeout(() => {
            popup.style.display = 'none';
        }, 5000);
    }

    // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø© ÙŠØ¯ÙˆÙŠØ§Ù‹
    function closeMessagePopup() {
        document.getElementById('message-popup').style.display = 'none';
    }

    // ÙØªØ­ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© Ù…Ù† Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø©
    function openChatFromPopup() {
        if (currentMessageSender) {
            window.location.href = `/chat/${currentMessageSender}/`;
        }
    }

    // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„ÙŠÙ‡Ø§
    document.getElementById('message-popup').addEventListener('click', function(e) {
        // ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Ø§Ù„Ù†Ù‚Ø± Ù„ÙŠØ³ Ø¹Ù„Ù‰ Ø²Ø± Ø§Ù„Ø¥ØºÙ„Ø§Ù‚ Ø£Ùˆ Ø²Ø± ÙØªØ­ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©
        if (!e.target.closest('.message-popup-close') && !e.target.closest('.message-popup-btn')) {
            closeMessagePopup();
        }
    });

    // Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
    function checkNewMessages() {
        fetch('/notifications/')
            .then(response => response.json())
            .then(data => {
                // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø¥Ø´Ø¹Ø§Ø± Ø±Ø³Ø§Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø© ØºÙŠØ± Ù…Ù‚Ø±ÙˆØ¡Ø©
                const newMessage = data.notifications.find(n => 
                    n.type === 'message' && !n.is_read
                );

                if (newMessage) {
                    showMessagePopup(
                        newMessage.sender,
                        newMessage.sender_profile_picture,
                        newMessage.content
                    );
                    
                    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± ÙƒÙ…Ù‚Ø±ÙˆØ¡
                    fetch(`/notifications/${newMessage.id}/read/`, {
                        method: 'POST',
                        headers: {
                            'X-CSRFToken': getCookie('csrftoken')
                        }
                    });
                }
            });
    }

    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ÙƒÙ„ 5 Ø«ÙˆØ§Ù†ÙŠ
    setInterval(checkNewMessages, 5000);

    // Ø§Ù„ØªØ­Ù‚Ù‚ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
    document.addEventListener('DOMContentLoaded', function() {
        checkNewMessages();
    });
</script>
<!-- Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¹Ø§Ø¦Ù„Ø© -->
<div id="family-modal" class="modal-overlay">
    <div class="modal-content">
        <div class="modal-header">
            <h5 class="modal-title">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ø§Ø¦Ù„Ø©</h5>
            <button class="close-btn">&times;</button>
        </div>
        <div class="modal-body">
            <div class="mb-3">
                <button class="btn btn-primary w-100" id="create-family-btn">
                    <i class="fas fa-plus"></i> Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ø§Ø¦Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø©
                </button>
            </div>
            
            <div class="mb-3">
                <h6>Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù… Ø¥Ù„Ù‰ Ø¹Ø§Ø¦Ù„Ø©</h6>
                <input type="text" id="family-code" class="form-control mb-2" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙˆØ¯ Ø§Ù„Ø¹Ø§Ø¦Ù„Ø©">
                <button class="btn btn-success w-100" id="join-family-btn">
                    <i class="fas fa-sign-in-alt"></i> Ø§Ù†Ø¶Ù…
                </button>
            </div>
            
            <div id="families-list">
                <h6>Ø¹Ø§Ø¦Ù„Ø§ØªÙƒ</h6>
                <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¡ Ù‡Ø°Ø§ Ø§Ù„Ù‚Ø³Ù… Ø¹Ø¨Ø± JavaScript -->
            </div>
        </div>
    </div>
</div>
<script>
// Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ø§Ø¦Ù„Ø©
document.getElementById("family-btn").addEventListener("click", function() {
    document.getElementById("family-modal").style.display = "flex";
    loadFamilies();
});

function loadFamilies() {
    fetch('/family/list/')
        .then(response => response.json())
        .then(data => {
            let list = document.getElementById('families-list');
            list.innerHTML = '<h6>Ø¹Ø§Ø¦Ù„Ø§ØªÙƒ</h6>';
            
            if (data.families.length === 0) {
                list.innerHTML += '<p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ø§Ø¦Ù„Ø§Øª</p>';
            } else {
                data.families.forEach(family => {
                    let item = document.createElement('div');
                    item.className = 'family-item p-2 mb-2 border rounded';
                    item.innerHTML = `
                        <h5>${family.name}</h5>
                        <p>Ø§Ù„ÙƒÙˆØ¯: ${family.code}</p>
                        <a href="/family/${family.id}/" class="btn btn-sm btn-primary">Ø§Ù„Ø¯Ø®ÙˆÙ„</a>
                    `;
                    list.appendChild(item);
                });
            }
        });
}

document.getElementById("create-family-btn").addEventListener("click", function() {
    let name = prompt("Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ø¹Ø§Ø¦Ù„Ø©:");
    if (name && name.trim()) {
        fetch('/family/create/', {
            method: 'POST',
            headers: {
                'X-CSRFToken': getCookie('csrftoken'),
                'Content-Type': 'application/x-www-form-urlencoded',
            },
            body: `name=${encodeURIComponent(name.trim())}`
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                alert(`ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¹Ø§Ø¦Ù„Ø© Ø¨Ù†Ø¬Ø§Ø­! ÙƒÙˆØ¯ Ø§Ù„Ø¹Ø§Ø¦Ù„Ø©: ${data.code}`);
                loadFamilies();
            } else {
                alert('Ø­Ø¯Ø« Ø®Ø·Ø£: ' + data.error);
            }
        });
    }
});

document.getElementById("join-family-btn").addEventListener("click", function() {
    let code = document.getElementById('family-code').value.trim().toUpperCase();
    if (code) {
        fetch('/family/join/', {
            method: 'POST',
            headers: {
                'X-CSRFToken': getCookie('csrftoken'),
                'Content-Type': 'application/x-www-form-urlencoded',
            },
            body: `code=${encodeURIComponent(code)}`
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                alert('ØªÙ… Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù… Ø¥Ù„Ù‰ Ø§Ù„Ø¹Ø§Ø¦Ù„Ø© Ø¨Ù†Ø¬Ø§Ø­!');
                window.location.href = `/family/${data.family_id}/`;
            } else {
                alert('Ø­Ø¯Ø« Ø®Ø·Ø£: ' + data.error);
            }
        });
    } else {
        alert('ÙŠØ¬Ø¨ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙˆØ¯ Ø§Ù„Ø¹Ø§Ø¦Ù„Ø©');
    }
});
</script>
<script>
    // Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ø§Ø¦Ù„Ø©
    document.getElementById("family-btn").addEventListener("click", function() {
        document.getElementById("family-modal").style.display = "flex";
        loadFamilies();
    });
    
    // Ø¥Ø¶Ø§ÙØ© Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯ Ù„Ø¥ØºÙ„Ø§Ù‚ Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¹Ø§Ø¦Ù„Ø©
    document.querySelector("#family-modal .close-btn").addEventListener("click", function() {
        document.getElementById("family-modal").style.display = "none";
    });
    
    // ÙŠÙ…ÙƒÙ†Ùƒ Ø£ÙŠØ¶Ù‹Ø§ Ø¥Ø¶Ø§ÙØ© Ø¥ØºÙ„Ø§Ù‚ Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬ Ø§Ù„Ù†Ø§ÙØ°Ø©
    document.getElementById("family-modal").addEventListener("click", function(e) {
        if (e.target === this) {
            this.style.display = "none";
        }
    });
    
    // Ø¨Ø§Ù‚ÙŠ ÙƒÙˆØ¯ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ø§Ø¦Ù„Ø© ÙŠØ¨Ù‚Ù‰ ÙƒÙ…Ø§ Ù‡Ùˆ...
    function loadFamilies() {
        fetch('/family/list/')
            .then(response => response.json())
            .then(data => {
                let list = document.getElementById('families-list');
                list.innerHTML = '<h6>Ø¹Ø§Ø¦Ù„Ø§ØªÙƒ</h6>';
                
                if (data.families.length === 0) {
                    list.innerHTML += '<p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ø§Ø¦Ù„Ø§Øª</p>';
                } else {
                    data.families.forEach(family => {
                        let item = document.createElement('div');
                        item.className = 'family-item p-2 mb-2 border rounded';
                        item.innerHTML = `
                            <h5>${family.name}</h5>
                            <p>Ø§Ù„ÙƒÙˆØ¯: ${family.code}</p>
                            <a href="/family/${family.id}/" class="btn btn-sm btn-primary">Ø§Ù„Ø¯Ø®ÙˆÙ„</a>
                        `;
                        list.appendChild(item);
                    });
                }
            });
    }
    
    // ... Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ø£Ø®Ø±Ù‰
    </script>
    
</body>
</html>
